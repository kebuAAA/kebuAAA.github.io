<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>网页下载 | 小明的博客</title><meta name="author" content="爱编程的小明"><meta name="copyright" content="爱编程的小明"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#e68ab8"><meta name="description" content="..."><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://kebuaaa.github.io/%E7%BD%91%E9%A1%B5%E4%B8%8B%E8%BD%BD/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//www.clarity.ms"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!true && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#e68ab8')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?4e3a07c287f8fb6cfc09bf5a7fdc1dd7";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
btf.addGlobalFn('pjaxComplete', () => {
  _hmt.push(['_trackPageview',window.location.pathname])
}, 'baidu_analytics')
</script><script>(function(c,l,a,r,i,t,y){
    c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
    t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
    y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
})(window, document, "clarity", "script", "e8bjif1knd");</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":1,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '网页下载',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  isShuoshuo: false
}</script><style>#article-container.post-content h1:before, h2:before, h3:before, h4:before, h5:before, h6:before { -webkit-animation: avatar_turn_around 1s linear infinite; -moz-animation: avatar_turn_around 1s linear infinite; -o-animation: avatar_turn_around 1s linear infinite; -ms-animation: avatar_turn_around 1s linear infinite; animation: avatar_turn_around 1s linear infinite; }</style><link rel="stylesheet" href="/Scripts/css/transparent.css"><link rel="stylesheet" href="/Scripts/css/font.css"><link rel="stylesheet" href="/Scripts/css/foot_style.css"><link rel="stylesheet" href="/Scripts/css/twikoo_beautify.css"><link rel="stylesheet" href="/Scripts/css/tags.css"><!-- hexo injector head_end start --><link rel="stylesheet" href="/Scripts/css/cardlistpost.min.css"/>
<style>#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags:before {content:"\A";
  white-space: pre;}#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags > .article-meta__separator{display:none}</style>
<link rel="stylesheet" href="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/animate.css/4.1.1/animate.min.css" media="print" onload="this.media='screen'"><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"><link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet" /></head><body><div id="web_bg" style="background-image: url(url(/img/index_img.webp));"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src= "https://gcore.jsdelivr.net/gh/kebuAAA/Picloud@main/img/loading.gif" data-lazy-src="/img/avatar.webp" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">100</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">57</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">18</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 存档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/wallpaper/"><i class="fa-fw fas fa-image fa-fw"></i><span> 壁纸</span></a></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://www.travellings.cn/go.html"><i class="fa-fw fa fa-subway"></i><span> 开往</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">小明的博客</span></a><a class="nav-page-title" href="/"><span class="site-name">网页下载</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 存档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/wallpaper/"><i class="fa-fw fas fa-image fa-fw"></i><span> 壁纸</span></a></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://www.travellings.cn/go.html"><i class="fa-fw fa fa-subway"></i><span> 开往</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">网页下载<a class="post-edit-link" href="https://github.dev/kebuAAA/myblog/blob/main/source/_posts/网页下载.md" title="编辑" target="_blank"><i class="fas fa-pencil-alt"></i></a></h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-07-19T02:34:00.000Z" title="发表于 2022-07-19 10:34:00">2022-07-19</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-07-20T02:34:00.000Z" title="更新于 2022-07-20 10:34:00">2022-07-20</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%88%AC%E8%99%AB/">爬虫</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%88%AC%E8%99%AB/%E7%90%86%E8%AE%BA/">理论</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><article class="container post-content" id="article-container"><p>爬虫的第一步是向网页发起模拟请求，一般来说模拟请求的可以借助Python中的<code>urllib</code>模块以及<code>requests</code>模块，其中<code>requests</code>模块是对<code>urllib</code>模块的一个封装，从实用性的角度出发，一般来说我们更建议使用<code>requests</code>模块</p>
<h1 id="request-get发起网页请求">request.get发起网页请求</h1>
<p><code>requests</code>库调用是<code>requests.get</code>方法传入url和参数，返回的对象是Response对象，打印出来是显示响应状态码。<br>
Response对象比较重要的三个属性:</p>
<ul>
<li><code>text</code>:unicode 型的数据，一般是在网页的header中定义的编码形式，</li>
<li><code>content</code>返回的是bytes，二进制型的数据。</li>
<li><code>json</code>也可以返回json字符串。<br>
如果想要提取文本就用text，但是如果你想要提取图片、文件等<strong>二进制文件</strong>，就要用content，当然decode之后，中文字符也会正常显示。</li>
</ul>
<h2 id="修改头文件-headers">修改头文件(Headers)</h2>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pcUserAgent = &#123;</span><br><span class="line"><span class="string">&quot;safari 5.1 – MAC&quot;</span>:<span class="string">&quot;User-Agent:Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_6_8; en-us) AppleWebKit/534.50 (KHTML, like Gecko) Version/5.1 Safari/534.50&quot;</span>,</span><br><span class="line"><span class="string">&quot;safari 5.1 – Windows&quot;</span>:<span class="string">&quot;User-Agent:Mozilla/5.0 (Windows; U; Windows NT 6.1; en-us) AppleWebKit/534.50 (KHTML, like Gecko) Version/5.1 Safari/534.50&quot;</span>,</span><br><span class="line"><span class="string">&quot;IE 9.0&quot;</span>:<span class="string">&quot;User-Agent:Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0);&quot;</span>,</span><br><span class="line"><span class="string">&quot;IE 8.0&quot;</span>:<span class="string">&quot;User-Agent:Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0; Trident/4.0)&quot;</span>,</span><br><span class="line"><span class="string">&quot;IE 7.0&quot;</span>:<span class="string">&quot;User-Agent:Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0)&quot;</span>,</span><br><span class="line"><span class="string">&quot;IE 6.0&quot;</span>:<span class="string">&quot;User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)&quot;</span>,</span><br><span class="line"><span class="string">&quot;Firefox 4.0.1 – MAC&quot;</span>:<span class="string">&quot;User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:2.0.1) Gecko/20100101 Firefox/4.0.1&quot;</span>,</span><br><span class="line"><span class="string">&quot;Firefox 4.0.1 – Windows&quot;</span>:<span class="string">&quot;User-Agent:Mozilla/5.0 (Windows NT 6.1; rv:2.0.1) Gecko/20100101 Firefox/4.0.1&quot;</span>,</span><br><span class="line"><span class="string">&quot;Opera 11.11 – MAC&quot;</span>:<span class="string">&quot;User-Agent:Opera/9.80 (Macintosh; Intel Mac OS X 10.6.8; U; en) Presto/2.8.131 Version/11.11&quot;</span>,</span><br><span class="line"><span class="string">&quot;Opera 11.11 – Windows&quot;</span>:<span class="string">&quot;User-Agent:Opera/9.80 (Windows NT 6.1; U; en) Presto/2.8.131 Version/11.11&quot;</span>,</span><br><span class="line"><span class="string">&quot;Chrome 17.0 – MAC&quot;</span>:<span class="string">&quot;User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_0) AppleWebKit/535.11 (KHTML, like Gecko) Chrome/17.0.963.56 Safari/535.11&quot;</span>,</span><br><span class="line"><span class="string">&quot;Maxthon&quot;</span>:<span class="string">&quot;User-Agent: Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; Maxthon 2.0)&quot;</span>,</span><br><span class="line"><span class="string">&quot;Tencent TT&quot;</span>:<span class="string">&quot;User-Agent: Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; TencentTraveler 4.0)&quot;</span>,</span><br><span class="line"><span class="string">&quot;The World 2.x&quot;</span>:<span class="string">&quot;User-Agent: Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1)&quot;</span>,</span><br><span class="line"><span class="string">&quot;The World 3.x&quot;</span>:<span class="string">&quot;User-Agent: Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; The World)&quot;</span>,</span><br><span class="line"><span class="string">&quot;sogou 1.x&quot;</span>:<span class="string">&quot;User-Agent: Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; Trident/4.0; SE 2.X MetaSr 1.0; SE 2.X MetaSr 1.0; .NET CLR 2.0.50727; SE 2.X MetaSr 1.0)&quot;</span>,</span><br><span class="line"><span class="string">&quot;360&quot;</span>:<span class="string">&quot;User-Agent: Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; 360SE)&quot;</span>,</span><br><span class="line"><span class="string">&quot;Avant&quot;</span>:<span class="string">&quot;User-Agent: Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; Avant Browser)&quot;</span>,</span><br><span class="line"><span class="string">&quot;Green Browser&quot;</span>:<span class="string">&quot;User-Agent: Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1)&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">mobileUserAgent = &#123;</span><br><span class="line"><span class="string">&quot;iOS 4.33 – iPhone&quot;</span>:<span class="string">&quot;User-Agent:Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_3_3 like Mac OS X; en-us) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8J2 Safari/6533.18.5&quot;</span>,</span><br><span class="line"><span class="string">&quot;iOS 4.33 – iPod Touch&quot;</span>:<span class="string">&quot;User-Agent:Mozilla/5.0 (iPod; U; CPU iPhone OS 4_3_3 like Mac OS X; en-us) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8J2 Safari/6533.18.5&quot;</span>,</span><br><span class="line"><span class="string">&quot;iOS 4.33 – iPad&quot;</span>:<span class="string">&quot;User-Agent:Mozilla/5.0 (iPad; U; CPU OS 4_3_3 like Mac OS X; en-us) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8J2 Safari/6533.18.5&quot;</span>,</span><br><span class="line"><span class="string">&quot;Android N1&quot;</span>:<span class="string">&quot;User-Agent: Mozilla/5.0 (Linux; U; Android 2.3.7; en-us; Nexus One Build/FRF91) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1&quot;</span>,</span><br><span class="line"><span class="string">&quot;Android QQ&quot;</span>:<span class="string">&quot;User-Agent: MQQBrowser/26 Mozilla/5.0 (Linux; U; Android 2.3.7; zh-cn; MB200 Build/GRJ22; CyanogenMod-7) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1&quot;</span>,</span><br><span class="line"><span class="string">&quot;Android Opera &quot;</span>:<span class="string">&quot;User-Agent: Opera/9.80 (Android 2.3.4; Linux; Opera Mobi/build-1107180945; U; en-GB) Presto/2.8.149 Version/11.10&quot;</span>,</span><br><span class="line"><span class="string">&quot;Android Pad Moto Xoom&quot;</span>:<span class="string">&quot;User-Agent: Mozilla/5.0 (Linux; U; Android 3.0; en-us; Xoom Build/HRI39) AppleWebKit/534.13 (KHTML, like Gecko) Version/4.0 Safari/534.13&quot;</span>,</span><br><span class="line"><span class="string">&quot;BlackBerry&quot;</span>:<span class="string">&quot;User-Agent: Mozilla/5.0 (BlackBerry; U; BlackBerry 9800; en) AppleWebKit/534.1+ (KHTML, like Gecko) Version/6.0.0.337 Mobile Safari/534.1+&quot;</span>,</span><br><span class="line"><span class="string">&quot;WebOS HP Touchpad&quot;</span>:<span class="string">&quot;User-Agent: Mozilla/5.0 (hp-tablet; Linux; hpwOS/3.0.0; U; en-US) AppleWebKit/534.6 (KHTML, like Gecko) wOSBrowser/233.70 Safari/534.6 TouchPad/1.0&quot;</span>,</span><br><span class="line"><span class="string">&quot;Nokia N97&quot;</span>:<span class="string">&quot;User-Agent: Mozilla/5.0 (SymbianOS/9.4; Series60/5.0 NokiaN97-1/20.0.019; Profile/MIDP-2.1 Configuration/CLDC-1.1) AppleWebKit/525 (KHTML, like Gecko) BrowserNG/7.1.18124&quot;</span>,</span><br><span class="line"><span class="string">&quot;Windows Phone Mango&quot;</span>:<span class="string">&quot;User-Agent: Mozilla/5.0 (compatible; MSIE 9.0; Windows Phone OS 7.5; Trident/5.0; IEMobile/9.0; HTC; Titan)&quot;</span>,</span><br><span class="line"><span class="string">&quot;UC&quot;</span>:<span class="string">&quot;User-Agent: UCWEB7.0.2.37/28/999&quot;</span>,</span><br><span class="line"><span class="string">&quot;UC standard&quot;</span>:<span class="string">&quot;User-Agent: NOKIA5700/ UCWEB7.0.2.37/28/999&quot;</span>,</span><br><span class="line"><span class="string">&quot;UCOpenwave&quot;</span>:<span class="string">&quot;User-Agent: Openwave/ UCWEB7.0.2.37/28/999&quot;</span>,</span><br><span class="line"><span class="string">&quot;UC Opera&quot;</span>:<span class="string">&quot;User-Agent: Mozilla/4.0 (compatible; MSIE 6.0; ) Opera/UCWEB7.0.2.37/28/999&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="查看cookie的方法">查看cookie的方法</h2>
<h2 id="添加代理">添加代理</h2>
<p>实际爬取网页的过程中可能要爬取一些国外的网站，这时不免要使用代理访问网站，<code>requests</code>库访问添加代理的形式如下:</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 设置代理，形式为:&#123;代理IP&#125;:&#123;端口号&#125;</span></span><br><span class="line">proxy = <span class="string">&#x27;192.168.0.1:1234&#x27;</span></span><br><span class="line">proxies = &#123;</span><br><span class="line">    <span class="string">&quot;http&quot;</span>: <span class="string">&quot;http://%(proxy)s/&quot;</span> % &#123;<span class="string">&#x27;proxy&#x27;</span>: proxy&#125;,</span><br><span class="line">    <span class="string">&quot;https&quot;</span>: <span class="string">&quot;http://%(proxy)s/&quot;</span> % &#123;<span class="string">&#x27;proxy&#x27;</span>: proxy&#125;</span><br><span class="line">&#125;</span><br><span class="line">r = requests.get(<span class="string">&#x27;&#x27;</span>, headers=headers,  proxies=proxies) <span class="comment">#加一个proxies参数</span></span><br><span class="line"><span class="built_in">print</span>(r.status_code)</span><br><span class="line"><span class="built_in">print</span>(r.text)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="urllib-request请求返回网页">urllib.request请求返回网页</h1>
<p><a target="_blank" rel="noopener" href="https://docs.python.org/3/library/urllib.request.html#module-urllib.request">python的urllib模块主要是负责打开URL和HTTP协议之类的。</a><br>
urllib库的response对象是先创建http，request对象，装载到reques.urlopen里完成http请求。<br>
返回的是http，response对象，实际上是html属性。使用<code>.read().decode()</code>解码后转化成了str字符串类型，decode解码后中文字符能够显示出来。<br>
按照官方文档， <code>urllib.request.urlopen</code>可以打开HTTP、 HTTPS、 FTP协议的URL， 主要应用于HTTP协议。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">urllib.request.urlopen(url,timeout)</span><br></pre></td></tr></table></figure>
<p><code>timeout</code>参数是超时时间设置<br>
返回类的使用方法：</p>
<ul>
<li>geturl()函数返回response的url信息， 常用于url重定向的情况。</li>
<li>info()函数返回response的基本信息。</li>
<li>getcode()函数返回response的状态代码， 最常见的代码是200服务器成功返回网页， 404请求的网页不存在， 503服务器暂时不可用。</li>
</ul>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> cookielib</span><br><span class="line"><span class="keyword">import</span> urllib2</span><br><span class="line"> </span><br><span class="line">url = <span class="string">&quot;http://www.baidu.com&quot;</span></span><br><span class="line">response1 = urllib2.urlopen(url)</span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;第一种方法&quot;</span></span><br><span class="line"><span class="comment">#获取状态码，200表示成功</span></span><br><span class="line"><span class="built_in">print</span> response1.getcode()</span><br><span class="line"><span class="comment">#获取网页内容的长度</span></span><br><span class="line"><span class="built_in">print</span> <span class="built_in">len</span>(response1.read())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">##添加特殊情境的处理器</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;第二种方法&quot;</span></span><br><span class="line">request = urllib2.Request(url)</span><br><span class="line"><span class="comment">#模拟Mozilla浏览器进行爬虫</span></span><br><span class="line">request.add_header(<span class="string">&quot;user-agent&quot;</span>,<span class="string">&quot;Mozilla/5.0&quot;</span>)</span><br><span class="line">response2 = urllib2.urlopen(request)</span><br><span class="line"><span class="built_in">print</span> response2.getcode()</span><br><span class="line"><span class="built_in">print</span> <span class="built_in">len</span>(response2.read())</span><br><span class="line"> </span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;第三种方法&quot;</span></span><br><span class="line">cookie = cookielib.CookieJar()</span><br><span class="line"><span class="comment">#加入urllib2处理cookie的能力</span></span><br><span class="line">opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cookie))</span><br><span class="line">urllib2.install_opener(opener)</span><br><span class="line">response3 = urllib2.urlopen(url)</span><br><span class="line"><span class="built_in">print</span> response3.getcode()</span><br><span class="line"><span class="built_in">print</span> <span class="built_in">len</span>(response3.read())</span><br><span class="line"><span class="built_in">print</span> cookie</span><br></pre></td></tr></table></figure>
<h2 id="添加代理">添加代理</h2>
<p>在访问网站时，urllib.request会将自己python的版本号作为User-Agent，我们可以对其进行修改。这时需要用到<code>urllib.request.add_header()</code>函数<br>
为了避免某些网站对IP的访问拒绝，我们可以为urllib添加代理，这里给出一种用urllib.request添加访问代理的方法（重点内容在68行）：</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment">#-*- coding: utf-8 -*-</span></span><br><span class="line">__author__ = <span class="string">&#x27;hstking hst_king@hotmail.com&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">testArgument</span>():</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;测试输入参数，只需要一个参数 &#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(sys.argv) != <span class="number">2</span>:</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;需要且只需要一个参数就够了&#x27;</span>)</span><br><span class="line">        tipUse()</span><br><span class="line">        exit()</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        TP = TestProxy(sys.argv[<span class="number">1</span>])</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">tipUse</span>():</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;显示提示信息 &#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;该程序只能输入一个参数，这个参数必须是一个可用的proxy&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;usage: python testUrllib2WithProxy.py http://1.2.3.4:5&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;usage: python testUrllib2WithProxy.py https://1.2.3.4:5&#x27;</span>)</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestProxy</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;这个类的作用是测试proxy是否有效 &#x27;&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self,proxy</span>):</span><br><span class="line">        self.proxy = proxy</span><br><span class="line">        self.checkProxyFormat(self.proxy)</span><br><span class="line">        self.url = <span class="string">&#x27;https://www.baidu.com&#x27;</span></span><br><span class="line">        self.timeout = <span class="number">5</span> </span><br><span class="line">        self.flagWord = <span class="string">&#x27;www.baidu.com&#x27;</span> <span class="comment">#在网页返回的数据中查找这个关键词</span></span><br><span class="line">        self.useProxy(self.proxy)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">checkProxyFormat</span>(<span class="params">self,proxy</span>):</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            proxyMatch = re.<span class="built_in">compile</span>(<span class="string">&#x27;http[s]?://[\d]&#123;1,3&#125;\.[\d]&#123;1,3&#125;\.[\d]&#123;1,3&#125;\.[\d]&#123;1,3&#125;:[\d]&#123;1,5&#125;$$</span></span><br><span class="line"><span class="string">&#x27;</span>)</span><br><span class="line">            re.search(proxyMatch,proxy).group()</span><br><span class="line">        <span class="keyword">except</span> AttributeError <span class="keyword">as</span> e:</span><br><span class="line">            tipUse()</span><br><span class="line">            exit()</span><br><span class="line">        flag = <span class="number">1</span></span><br><span class="line">        proxy = proxy.replace(<span class="string">&#x27;//&#x27;</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            protocol = proxy.split(<span class="string">&#x27;:&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">            ip = proxy.split(<span class="string">&#x27;:&#x27;</span>)[<span class="number">1</span>]</span><br><span class="line">            port = proxy.split(<span class="string">&#x27;:&#x27;</span>)[<span class="number">2</span>]</span><br><span class="line">        <span class="keyword">except</span> IndexError <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;下标出界&#x27;</span>)</span><br><span class="line">            tipUse()</span><br><span class="line">            exit()</span><br><span class="line">        flag = flag <span class="keyword">and</span> <span class="built_in">len</span>(proxy.split(<span class="string">&#x27;:&#x27;</span>)) == <span class="number">3</span> <span class="keyword">and</span> <span class="built_in">len</span>(ip.split(<span class="string">&#x27;.&#x27;</span>)) == <span class="number">4</span></span><br><span class="line">        flag = ip.split(<span class="string">&#x27;.&#x27;</span>)[<span class="number">0</span>] <span class="keyword">in</span> <span class="built_in">map</span>(<span class="built_in">str</span>,<span class="built_in">range</span>(<span class="number">1</span>,<span class="number">256</span>)) <span class="keyword">and</span> flag</span><br><span class="line">        flag = ip.split(<span class="string">&#x27;.&#x27;</span>)[<span class="number">1</span>] <span class="keyword">in</span> <span class="built_in">map</span>(<span class="built_in">str</span>,<span class="built_in">range</span>(<span class="number">256</span>)) <span class="keyword">and</span> flag</span><br><span class="line">        flag = ip.split(<span class="string">&#x27;.&#x27;</span>)[<span class="number">2</span>] <span class="keyword">in</span> <span class="built_in">map</span>(<span class="built_in">str</span>,<span class="built_in">range</span>(<span class="number">256</span>)) <span class="keyword">and</span> flag</span><br><span class="line">        flag = ip.split(<span class="string">&#x27;.&#x27;</span>)[<span class="number">3</span>] <span class="keyword">in</span> <span class="built_in">map</span>(<span class="built_in">str</span>,<span class="built_in">range</span>(<span class="number">1</span>,<span class="number">255</span>)) <span class="keyword">and</span> flag</span><br><span class="line">        flag = protocol <span class="keyword">in</span> [<span class="string">&#x27;http&#x27;</span>, <span class="string">&#x27;https&#x27;</span>] <span class="keyword">and</span> flag</span><br><span class="line">        flag = port <span class="keyword">in</span> <span class="built_in">map</span>(<span class="built_in">str</span>,<span class="built_in">range</span>(<span class="number">1</span>,<span class="number">65535</span>)) <span class="keyword">and</span> flag</span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;这里是在检查proxy的格式 &#x27;&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> flag:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;输入的http代理服务器符合标准&#x27;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            tipUse()</span><br><span class="line">            exit()      </span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">useProxy</span>(<span class="params">self,proxy</span>):</span><br><span class="line">        <span class="string">&#x27;&#x27;&#x27;利用代理访问百度，并查找关键词 &#x27;&#x27;&#x27;</span></span><br><span class="line">        protocol = proxy.split(<span class="string">&#x27;://&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">        proxy_handler = urllib.request.ProxyHandler(&#123;protocol: proxy&#125;)</span><br><span class="line">        opener = urllib.request.build_opener(proxy_handler)</span><br><span class="line">        urllib.request.install_opener(opener)</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            response = urllib.request.urlopen(self.url,timeout = self.timeout)</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;连接错误，退出程序&#x27;</span>)</span><br><span class="line">            exit()</span><br><span class="line">        result = response.read().decode(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;%s&#x27;</span> %result)</span><br><span class="line">        <span class="keyword">if</span> re.search(self.flagWord, result):</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;已取得特征词，该代理可用&#x27;</span>)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&#x27;该代理不可用&#x27;</span>)</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    testArgument()  </span><br><span class="line"></span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://kebuaaa.github.io">爱编程的小明</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://kebuaaa.github.io/%E7%BD%91%E9%A1%B5%E4%B8%8B%E8%BD%BD/">https://kebuaaa.github.io/%E7%BD%91%E9%A1%B5%E4%B8%8B%E8%BD%BD/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://kebuaaa.github.io" target="_blank">小明的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Python%E5%BA%93/">Python库</a><a class="post-meta__tags" href="/tags/Python%E7%88%AC%E8%99%AB/">Python爬虫</a></div><div class="post-share"><div class="social-share" data-image="/top_img/10008.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/Python%E8%84%9A%E6%9C%AC/" title="Python脚本"><img class="cover" src= "https://gcore.jsdelivr.net/gh/kebuAAA/Picloud@main/img/loading.gif" data-lazy-src="https://www.python.org/static/community_logos/python-logo.png" onerror="onerror=null;src='https://images.pexels.com/photos/374918/pexels-photo-374918.jpeg?auto=compress&amp;cs=tinysrgb&amp;w=600'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Python脚本</div></div><div class="info-2"><div class="info-item-1">主要用来记录一些比较常用的小脚本，提高工作效率</div></div></div></a><a class="pagination-related" href="/Python%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" title="Python数据结构"><img class="cover" src= "https://gcore.jsdelivr.net/gh/kebuAAA/Picloud@main/img/loading.gif" data-lazy-src="https://www.python.org/static/community_logos/python-logo.png" onerror="onerror=null;src='https://images.pexels.com/photos/374918/pexels-photo-374918.jpeg?auto=compress&amp;cs=tinysrgb&amp;w=600'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">Python数据结构</div></div><div class="info-2"><div class="info-item-1">数据类型  一般来说读写数据常常涉及的两种数据类型是文本数据与二进制数据(图片、语音），Python中对于这两大类数据的操作主要使用其内置的两种数据类型——字符串与字节数组： 字节数组: 8 比特整数组成的序列，用于存储二进制数据。 字符串: Unicode 字符组成的序列，用于存储文本数据 字节 &amp; 字节数组  字节是不可变的，像字节数据组成的元组； 字节数组是可变的，像字节数据组成的列表。 bytes 类型值的表示形式比较特殊：以 b 开头，接着是一个单引号，后面跟着由十六进制数（例如 \x02）或 ASCII 码组成的序列，最后以配对的单引号结束。  a = [1, 2, 1, 3]print(bytes(a))b=bytearray(a)print(b)b.append(3)print(b) 字符串 Unicode Unicode编码是一种国际化的编码方式，存储在其中的每一个字符都有自己独特的名字(帮助理解的标准名称)和标识数(Unicode ID)。 在Python中，我们如果知道某个字符的的Unicode...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/%E7%BD%91%E9%A1%B5%E8%A7%A3%E6%9E%90/" title="网页解析"><img class="cover" src= "https://gcore.jsdelivr.net/gh/kebuAAA/Picloud@main/img/loading.gif" data-lazy-src="/top_img/10026.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-04-05</div><div class="info-item-2">网页解析</div></div><div class="info-2"><div class="info-item-1">网页解析完成的是从下载回来的html文件中提取所需数据的方法，一般会用到的方法有:  正则表达式：将整个网页文档当成一个字符串用模糊匹配的方式来提取出有价值的数据 Beautidul Soup：一个强大的第三方插件 lxml：解析html网页或者xml网页  不同解析办法只是匹配的方式不同，按道理来说几种方法可以相互替换，正则表达式的语法就不做赘述，这里介绍一下Python中的一个库Beautidul Soup，它能将HTML的标签文件解析成树形结构，然后方便地获取到指定标签的对应属性。  Beautiful Soup 官方中文文档 搜索过程： 根据结构化解析的方式将对html的节点按照节点的名称/属性/文字进行搜索：   Beautiful使用方法为:  首先根据html网页和解析编码方式创建一个bs对象 调用find_all或者find方法对节点进行搜索,或者使用find()返回第一个匹配结果 对于搜索到的结果 find all(name,attrs,string)其中name参数表示节点的标签名称，attr为节点的属性名称，string为节点的文字内容。  from...</div></div></div></a><a class="pagination-related" href="/Matplotlib/" title="Matplotlib库"><img class="cover" src= "https://gcore.jsdelivr.net/gh/kebuAAA/Picloud@main/img/loading.gif" data-lazy-src="https://matplotlib.org/_static/images/logo2.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-04-01</div><div class="info-item-2">Matplotlib库</div></div><div class="info-2"><div class="info-item-1">将本文结合代码使用效果更佳哦❤️❤️   matplotlib is a desktop plotting package designed for creating (mostly twodimensional) publication-quality plots. The project was started by John Hunter in 2002 to enable a MATLAB-like plotting interface in Python. Over time, matplotlib has spawned a number of add-on toolkits for data visualization that use matplotlib for their underlying plotting. One of these is...</div></div></div></a><a class="pagination-related" href="/Numpy/" title="Numpy"><img class="cover" src= "https://gcore.jsdelivr.net/gh/kebuAAA/Picloud@main/img/loading.gif" data-lazy-src="/top_img/10049.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-27</div><div class="info-item-2">Numpy</div></div><div class="info-2"><div class="info-item-1">numpy(numerical  Python) 是 Python 数值计算最重要的基础包，大多数提供科学计算的包都是用 NumPy 的数组为构建基础。 NumPy 可以用于数值计算的一个重要原因是因为他能处理大数组的数据：  在连续的内存块储存数据，独立于其他 Python 内置对象（C 语言编写的算法库，在 C 的基础上封装） 可以在整个数组上执行复杂的计算，不需要 for loop  速查  图片对应pdf.pdf 介绍 基本用法 NumPy 最重要的一个特点就是 ndarray(n 维数组对象，一个快速而灵活的大数据集容器) Creating ndarray python 默认创建数组的数据类型是浮点数（方便科学计算）   np.array():   支持任何序列对象   np.zeros（） np.empty()创建一个数组，值可能为 0 有些情况下为垃圾值 np.arrange():类似于内置的 range 返回一个  数组的数据类型  类型转换–np.astype 可以在创建数组时指定数值类型，也可以通过...</div></div></div></a><a class="pagination-related" href="/Pandas/" title="Pandas"><img class="cover" src= "https://gcore.jsdelivr.net/gh/kebuAAA/Picloud@main/img/loading.gif" data-lazy-src="https://camo.githubusercontent.com/981d48e57e23a4907cebc4eb481799b5882595ea978261f22a3e131dcd6ebee6/68747470733a2f2f70616e6461732e7079646174612e6f72672f7374617469632f696d672f70616e6461732e737667" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-09-02</div><div class="info-item-2">Pandas</div></div><div class="info-2"><div class="info-item-1">放一个目录做的的思维导图   一场数模国赛下来发现对于pandas里的一些基础操作还不是很熟练，整个建模过程中用到了许多pandas中对DataFrame的索引，切片访问，分组交叉透视等功能，除此以外稍微高级一点的就是用了几次apply函数来对某一行的值进行一个计算输出，虽然知识描述统计这部分的内容，但是能明显的感觉到对于这些基本功能有些生疏。坦白来讲，pandas的描述统计相关的这些工作其实借助excel也能够实现，但是当考虑到可迁移性这些方面的内容时，使用编程语言的优越性也就自然而然地体现出来，当然，如果对相关的函数不能做到很熟悉的话，其实反而加大了工作量。  简介 Pandas 是 Python 的核心数据分析支持库，提供了快速、灵活、明确的数据结构，旨在简单、直观地处理关系型、标记型数据。Pandas 的目标是成为 Python 数据分析实践与实战的必备高级工具，其长远目标是成为最强大、最灵活、可以支持任何语言的开源数据分析工具。经过多年不懈的努力，Pandas 离这个目标已经越来越近了。  虽然 pandas 采用了大量的 NumPy 编码风格，但二者最大的不同是...</div></div></div></a><a class="pagination-related" href="/PyCaret/" title="PyCaret"><img class="cover" src= "https://gcore.jsdelivr.net/gh/kebuAAA/Picloud@main/img/loading.gif" data-lazy-src="/top_img/10029.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-07-31</div><div class="info-item-2">PyCaret</div></div><div class="info-2"><div class="info-item-1">PyCaret是Python中的低代码机器学习开发平台，能够自动完成机器学习的整个工作流。  这个库提供了借助相对工整的数据（无缺失值、类型明确）对一类的机器学习模型（分类、回归、聚类）进行训练，该库能够自己对数据集进行处理，并且能够自动生成模型，除此以外还能进行模型的评价和在测试集上的训练，这些都可以在官方文档中的QuickStart中查看。  这个库非常好的一点在于可以直接根据输入数据来判断数据类型然后作相应的数据处理操作，除此以外它也支持自定义的数据处理操作，这些操作可以在官方文档中的Preprocessing中查看。 最后，这个库也支持对于某一个特定的模型进行调优，这些调优可以在官方文档中的Hyperparameter Tuning中查看。 </div></div></div></a><a class="pagination-related" href="/Seaborn%E5%BA%93%E7%AE%80%E4%BB%8B/" title="Seaborn库简介"><img class="cover" src= "https://gcore.jsdelivr.net/gh/kebuAAA/Picloud@main/img/loading.gif" data-lazy-src="https://seaborn.pydata.org/_images/logo-wide-lightbg.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-09-21</div><div class="info-item-2">Seaborn库简介</div></div><div class="info-2"><div class="info-item-1">将本文结合代码使用效果更佳哦❤️❤️  速查  example gallery:      Seaborn 库简介 特点:  Seaborn, a statistical graphics library created by Michael Waskom. Seaborn simplifies creating many common visualization types. Unlike when using matplotlib directly, it wasn’t necessary to specify attributes of the plot elements in terms of the color values or marker codes. Behind the scenes, seaborn handled the translation from values in the dataframe to arguments that matplotlib understands. This declarative approach lets you...</div></div></div></a></div></div><hr class="custom-hr"/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src= "https://gcore.jsdelivr.net/gh/kebuAAA/Picloud@main/img/loading.gif" data-lazy-src="/img/avatar.webp" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">爱编程的小明</div><div class="author-info-description">只要不折腾，万般可将就</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">100</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">57</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">18</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/kebuAAA"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/kebuAAA" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="/2945190789@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="/img/wechat.webp" target="_blank" title="欢迎交流"><i class="fa-brands fa-weixin"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">如网页加载较慢请尝试魔法上网，博客图文可能无关可以忽略</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#request-get%E5%8F%91%E8%B5%B7%E7%BD%91%E9%A1%B5%E8%AF%B7%E6%B1%82"><span class="toc-number">1.</span> <span class="toc-text">request.get发起网页请求</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%A4%B4%E6%96%87%E4%BB%B6-headers"><span class="toc-number">1.1.</span> <span class="toc-text">修改头文件(Headers)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8Bcookie%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">1.2.</span> <span class="toc-text">查看cookie的方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E4%BB%A3%E7%90%86"><span class="toc-number">1.3.</span> <span class="toc-text">添加代理</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#urllib-request%E8%AF%B7%E6%B1%82%E8%BF%94%E5%9B%9E%E7%BD%91%E9%A1%B5"><span class="toc-number">2.</span> <span class="toc-text">urllib.request请求返回网页</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E4%BB%A3%E7%90%86"><span class="toc-number">2.1.</span> <span class="toc-text">添加代理</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/Lasso%E5%9B%9E%E5%BD%92/" title="Lasso回归"><img src= "https://gcore.jsdelivr.net/gh/kebuAAA/Picloud@main/img/loading.gif" data-lazy-src="/top_img/10035.webp" onerror="this.onerror=null;this.src='https://images.pexels.com/photos/374918/pexels-photo-374918.jpeg?auto=compress&amp;cs=tinysrgb&amp;w=600'" alt="Lasso回归"/></a><div class="content"><a class="title" href="/Lasso%E5%9B%9E%E5%BD%92/" title="Lasso回归">Lasso回归</a><time datetime="2023-11-14T16:00:00.000Z" title="更新于 2023-11-15 00:00:00">2023-11-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E5%B2%AD%E5%9B%9E%E5%BD%92/" title="岭回归"><img src= "https://gcore.jsdelivr.net/gh/kebuAAA/Picloud@main/img/loading.gif" data-lazy-src="https://gcore.jsdelivr.net/gh/kebuAAA/Picloud@main/岭回归_20231109082818.png" onerror="this.onerror=null;this.src='https://images.pexels.com/photos/374918/pexels-photo-374918.jpeg?auto=compress&amp;cs=tinysrgb&amp;w=600'" alt="岭回归"/></a><div class="content"><a class="title" href="/%E5%B2%AD%E5%9B%9E%E5%BD%92/" title="岭回归">岭回归</a><time datetime="2023-11-07T16:00:00.000Z" title="更新于 2023-11-08 00:00:00">2023-11-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E4%BC%98%E9%9B%85%E8%AE%BA%E6%96%87%E6%8E%92%E7%89%88/" title="优雅论文排版"><img src= "https://gcore.jsdelivr.net/gh/kebuAAA/Picloud@main/img/loading.gif" data-lazy-src="https://gcore.jsdelivr.net/gh/kebuAAA/Picloud@main/优雅论文排版_20230921093206.png" onerror="this.onerror=null;this.src='https://images.pexels.com/photos/374918/pexels-photo-374918.jpeg?auto=compress&amp;cs=tinysrgb&amp;w=600'" alt="优雅论文排版"/></a><div class="content"><a class="title" href="/%E4%BC%98%E9%9B%85%E8%AE%BA%E6%96%87%E6%8E%92%E7%89%88/" title="优雅论文排版">优雅论文排版</a><time datetime="2023-09-20T16:00:00.000Z" title="更新于 2023-09-21 00:00:00">2023-09-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E5%A4%9A%E5%85%83%E7%BB%9F%E8%AE%A1%E5%88%86%E6%9E%90/" title="多元统计分析"><img src= "https://gcore.jsdelivr.net/gh/kebuAAA/Picloud@main/img/loading.gif" data-lazy-src="https://gcore.jsdelivr.net/gh/kebuAAA/Picloud@main/多元统计分析_多元正态曲线.png" onerror="this.onerror=null;this.src='https://images.pexels.com/photos/374918/pexels-photo-374918.jpeg?auto=compress&amp;cs=tinysrgb&amp;w=600'" alt="多元统计分析"/></a><div class="content"><a class="title" href="/%E5%A4%9A%E5%85%83%E7%BB%9F%E8%AE%A1%E5%88%86%E6%9E%90/" title="多元统计分析">多元统计分析</a><time datetime="2023-06-16T02:22:54.000Z" title="更新于 2023-06-16 10:22:54">2023-06-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Hypothesis%20testing/" title="假设检验"><img src= "https://gcore.jsdelivr.net/gh/kebuAAA/Picloud@main/img/loading.gif" data-lazy-src="/top_img/10028.webp" onerror="this.onerror=null;this.src='https://images.pexels.com/photos/374918/pexels-photo-374918.jpeg?auto=compress&amp;cs=tinysrgb&amp;w=600'" alt="假设检验"/></a><div class="content"><a class="title" href="/Hypothesis%20testing/" title="假设检验">假设检验</a><time datetime="2023-05-09T02:34:00.000Z" title="更新于 2023-05-09 10:34:00">2023-05-09</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="footer_custom_text"><div id="runtime"></div></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"></div><div id="rightside-config-show"><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/instant.page/5.1.0/instantpage.min.js" type="module"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/vanilla-lazyload/17.3.1/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  const isShuoshuo = GLOBAL_CONFIG_SITE.isShuoshuo
  const option = null

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: 'https://twikoo.kobal.top/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const init = (el = document, path = location.pathname) => {
    twikoo.init({
      el: el.querySelector('#twikoo-wrap'),
      envId: 'https://twikoo.kobal.top/',
      region: '',
      onCommentLoaded: () => {
        btf.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      },
      ...option,
      path: isShuoshuo ? path : (option && option.path) || path
    })

    

    isShuoshuo && (window.shuoshuoComment.destroyTwikoo = () => {
      if (el.children.length) {
        el.innerHTML = ''
        el.classList.add('no-comment')
      }
    })
  }

  const loadTwikoo = (el, path) => {
    if (typeof twikoo === 'object') setTimeout(() => init(el, path), 0)
    else btf.getScript('https://cdn.staticfile.org/twikoo/1.6.22/twikoo.all.min.js').then(() => init(el, path))
  }

  if (isShuoshuo) {
    'Twikoo' === 'Twikoo'
      ? window.shuoshuoComment = { loadComment: loadTwikoo }
      : window.loadOtherComment = loadTwikoo
    return
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo()
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script></div><script src="/Scripts/js/beijing.js"></script><script src="/Scripts/js/foot_style.js"></script><script src="/Scripts/js/fireworks.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.bootcdn.net/ajax/libs/butterfly-extsrc/1.1.3/fireworks.min.js"></script><script src="https://lib.baomitu.com/pjax/0.2.8/pjax.min.js"></script><script>(() => {
  const pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]

  window.pjax = new Pjax({
    elements: 'a:not([target="_blank"])',
    selectors: pjaxSelectors,
    cacheBust: false,
    analytics: false,
    scrollRestoration: false
  })

  const triggerPjaxFn = (val) => {
    if (!val) return
    Object.values(val).forEach(fn => fn())
  }

  document.addEventListener('pjax:send', () => {
    // removeEventListener
    btf.removeGlobalFnEvent('pjaxSendOnce')
    btf.removeGlobalFnEvent('themeChange')

    // reset readmode
    const $bodyClassList = document.body.classList
    if ($bodyClassList.contains('read-mode')) $bodyClassList.remove('read-mode')

    triggerPjaxFn(window.globalFn.pjaxSend)
  })

  document.addEventListener('pjax:complete', () => {
    btf.removeGlobalFnEvent('pjaxCompleteOnce')
    document.querySelectorAll('script[data-pjax]').forEach(item => {
      const newScript = document.createElement('script')
      const content = item.text || item.textContent || item.innerHTML || ""
      Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
      newScript.appendChild(document.createTextNode(content))
      item.parentNode.replaceChild(newScript, item)
    })

    triggerPjaxFn(window.globalFn.pjaxComplete)
  })

  document.addEventListener('pjax:error', e => {
    if (e.request.status === 404) {
      pjax.loadUrl('/404.html')
    }
  })
})()</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><div class="js-pjax"><script async="async">var arr = document.getElementsByClassName('recent-post-item');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '2s');
    arr[i].setAttribute('data-wow-delay', '0.5s');
    arr[i].setAttribute('data-wow-offset', '100');
    arr[i].setAttribute('data-wow-iteration', '1');
  }</script><script async="async">var arr = document.getElementsByClassName('card-widget');
for(var i = 0;i<arr.length;i++){
    arr[i].classList.add('wow');
    arr[i].classList.add('animate__zoomIn');
    arr[i].setAttribute('data-wow-duration', '');
    arr[i].setAttribute('data-wow-delay', '');
    arr[i].setAttribute('data-wow-offset', '');
    arr[i].setAttribute('data-wow-iteration', '');
  }</script></div><script defer src="https://lf6-cdn-tos.bytecdntp.com/cdn/expire-1-M/wow/1.1.2/wow.min.js"></script><script defer src="https://npm.elemecdn.com/hexo-butterfly-wowjs/lib/wow_init.js"></script><!-- hexo injector body_end end --></body></html>