<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover"><title>综合实例 | 小明的博客</title><meta name="author" content="爱编程的小明"><meta name="copyright" content="爱编程的小明"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#e68ab8"><meta name="description" content="..."><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "综合实例",
  "url": "https://kebuaaa.github.io/%E7%BB%BC%E5%90%88%E5%AE%9E%E4%BE%8B/",
  "image": "https://kebuaaa.github.io/top_img/10006.webp",
  "datePublished": "2022-03-26T02:34:00.000Z",
  "dateModified": "2022-08-26T02:34:00.000Z",
  "author": [
    {
      "@type": "Person",
      "name": "爱编程的小明",
      "url": "https://kebuaaa.github.io/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://kebuaaa.github.io/%E7%BB%BC%E5%90%88%E5%AE%9E%E4%BE%8B/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//hm.baidu.com"><link rel="preconnect" href="//www.clarity.ms"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>(()=>{const e={set:(e,t,o)=>{if(!o)return;const a=Date.now()+864e5*o;localStorage.setItem(e,JSON.stringify({value:t,expiry:a}))},get:e=>{const t=localStorage.getItem(e);if(!t)return;const{value:o,expiry:a}=JSON.parse(t);if(!(Date.now()>a))return o;localStorage.removeItem(e)}};window.btf={saveToLocal:e,getScript:(e,t={})=>new Promise(((o,a)=>{const n=document.createElement("script");n.src=e,n.async=!0,Object.entries(t).forEach((([e,t])=>n.setAttribute(e,t))),n.onload=n.onreadystatechange=()=>{n.readyState&&!/loaded|complete/.test(n.readyState)||o()},n.onerror=a,document.head.appendChild(n)})),getCSS:(e,t)=>new Promise(((o,a)=>{const n=document.createElement("link");n.rel="stylesheet",n.href=e,t&&(n.id=t),n.onload=n.onreadystatechange=()=>{n.readyState&&!/loaded|complete/.test(n.readyState)||o()},n.onerror=a,document.head.appendChild(n)})),addGlobalFn:(e,t,o=!1,a=window)=>{const n=a.globalFn||{};n[e]=n[e]||{},n[e][o||Object.keys(n[e]).length]=t,a.globalFn=n}};const t=()=>{document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},o=()=>{document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#e68ab8")};btf.activateDarkMode=t,btf.activateLightMode=o;const a=e.get("theme");"dark"===a?t():"light"===a&&o();const n=e.get("aside-status");void 0!==n&&document.documentElement.classList.toggle("hide-aside","hide"===n);/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})()</script><script>var _hmt=_hmt||[];!function(){var t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?4e3a07c287f8fb6cfc09bf5a7fdc1dd7";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(t,a)}(),btf.addGlobalFn("pjaxComplete",(()=>{_hmt.push(["_trackPageview",window.location.pathname])}),"baidu_analytics")</script><script>!function(e,t,n,c,a,i,r){e[n]=e[n]||function(){(e[n].q=e[n].q||[]).push(arguments)},(i=t.createElement(c)).async=1,i.src="https://www.clarity.ms/tag/e8bjif1knd",(r=t.getElementsByTagName(c)[0]).parentNode.insertBefore(i,r)}(window,document,"clarity","script")</script><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:void 0,translate:{defaultEncoding:1,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"簡"},highlight:{plugin:"highlight.js",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:!1,highlightFullpage:!1,highlightMacStyle:!1},copy:{success:"复制成功",error:"复制失败",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"",dateSuffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"null",Snackbar:void 0,infinitegrid:{js:"https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js",buttonText:"加载更多"},isPhotoFigcaption:!1,islazyloadPlugin:!0,isAnchor:!1,percent:{toc:!0,rightside:!1},autoDarkmode:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"综合实例",isHighlightShrink:!1,isToc:!0,pageType:"post"}</script><style>#article-container.post-content h1:before,h2:before,h3:before,h4:before,h5:before,h6:before{-webkit-animation:avatar_turn_around 1s linear infinite;-moz-animation:avatar_turn_around 1s linear infinite;-o-animation:avatar_turn_around 1s linear infinite;-ms-animation:avatar_turn_around 1s linear infinite;animation:avatar_turn_around 1s linear infinite}</style><link rel="stylesheet" href="/Scripts/css/transparent.css"><link rel="stylesheet" href="/Scripts/css/font.css"><link rel="stylesheet" href="/Scripts/css/foot_style.css"><link rel="stylesheet" href="/Scripts/css/twikoo_beautify.css"><link rel="stylesheet" href="/Scripts/css/tags.css"><link rel="stylesheet" href="https://unpkg.zhimg.com/hexo-butterfly-wowjs/lib/animate.min.css" media="print" onload='this.media="screen"'><meta name="generator" content="Hexo 7.3.0"><link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet"></head><body><div id="web_bg" style="background-image:url(url(/img/index_img.webp))"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="https://gcore.jsdelivr.net/gh/kebuAAA/Picloud@main/img/loading.gif" data-lazy-src="/img/avatar.webp" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">100</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">57</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">18</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>存档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>分类</span></a></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fas fa-link"></i> <span>友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i> <span>关于</span></a></div><div class="menus_item"><a class="site-page" href="/wallpaper/"><i class="fa-fw fas fa-image fa-fw"></i> <span>壁纸</span></a></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://www.travellings.cn/go.html"><i class="fa-fw fa fa-subway"></i> <span>开往</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">小明的博客</span></a><a class="nav-page-title" href="/"><span class="site-name">综合实例</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i> <span>首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i> <span>存档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i> <span>标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i> <span>分类</span></a></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fas fa-link"></i> <span>友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i> <span>关于</span></a></div><div class="menus_item"><a class="site-page" href="/wallpaper/"><i class="fa-fw fas fa-image fa-fw"></i> <span>壁纸</span></a></div><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://www.travellings.cn/go.html"><i class="fa-fw fa fa-subway"></i> <span>开往</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">综合实例<a class="post-edit-link" href="https://github.dev/kebuAAA/myblog/blob/main/source/_posts/综合实例.md" title="编辑" target="_blank"><i class="fas fa-pencil-alt"></i></a></h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-03-26T02:34:00.000Z" title="发表于 2022-03-26 10:34:00">2022-03-26</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-08-26T02:34:00.000Z" title="更新于 2022-08-26 10:34:00">2022-08-26</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">机器学习</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/%E7%BC%96%E7%A8%8B/">编程</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><article class="container post-content" id="article-container"><blockquote><p>本文主要记录在学习机器学习过程中做的一些简单的小项目，项目代码均来自于杨志晓老师的《Python机器学习一本通》一书，机缘巧合之下这本书也算是我接触Python机器学习的启蒙书籍，书本很厚，但是其实内容不多，至今犹记得去年年末封在宿舍独自一人啃这本书的心酸经历，一本书看来收获颇丰。</p></blockquote><h1 id="加载boston数据集-另存并重新访问">加载boston数据集、另存并重新访问</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> datasets</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line">boston=datasets.load_boston()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;boston.data的形状为：&#x27;</span>,boston.data.shape)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;boston.target的形状为：&#x27;</span>,boston.target.shape)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;boston.target的特征名称为：\n&#x27;</span>,boston.feature_names)</span><br><span class="line">df_boston=pd.DataFrame(np.hstack((boston.data,boston.target.reshape(-<span class="number">1</span>,<span class="number">1</span>))))</span><br><span class="line"><span class="comment">#高手点拨，为两个数组合并后转化为的.DataFrame添加特征名称</span></span><br><span class="line"><span class="comment">#columns=np.append(boston.feature_names,&#x27;values&#x27;)</span></span><br><span class="line"><span class="comment">#df_boston=pd.DataFrame(np.hstack((boston.data,boston.target.reshape(-1,1))),columns=columns)</span></span><br><span class="line">sns.pairplot(df_boston)<span class="comment">#必须是DataFrame对象</span></span><br><span class="line"><span class="comment">#创建或访问一个文件夹</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">path=<span class="string">&#x27;D:/my_python/ch5/data/&#x27;</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(path):</span><br><span class="line">  os.makedirs(path)</span><br><span class="line"><span class="comment">#保存为csv文本文件</span></span><br><span class="line">df_boston.to_csv(path+<span class="string">&#x27;boston.csv&#x27;</span>,sep = <span class="string">&#x27;,&#x27;</span>,index = <span class="literal">False</span>) <span class="comment">#保存为csv文本文件</span></span><br><span class="line">loaded_boston=pd.read_table(path+<span class="string">&#x27;boston.csv&#x27;</span>,</span><br><span class="line">      sep = <span class="string">&#x27;,&#x27;</span>,encoding = <span class="string">&#x27;gbk&#x27;</span>)<span class="comment">#读取csv文本文件</span></span><br><span class="line">sns.pairplot(loaded_boston)<span class="comment">#必须是DataFrame对象</span></span><br><span class="line"><span class="comment">#保存为Excel文件</span></span><br><span class="line">df_boston.to_excel(path+<span class="string">&#x27;boston.xls&#x27;</span>) </span><br><span class="line">loaded_boston2=pd.read_excel(path+<span class="string">&#x27;boston.xls&#x27;</span>)</span><br><span class="line">sns.pairplot(loaded_boston2)<span class="comment">#必须是DataFrame对象</span></span><br></pre></td></tr></table></figure><h1 id="breast-cancer数据集预处理">breast_cancer数据集预处理</h1><p>下面将以breast_cancer数据集为例，综合展示数据预处理、降维等方法。</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#6-12 综合实例——breast_cancer数据集特征关系分析、标准化、降维</span></span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> datasets</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> preprocessing</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="comment">#加载scikit-learn自带数据集breast_cancer</span></span><br><span class="line">breast_cancer=datasets.load_breast_cancer()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;breast_cancer.data的形状为：&#x27;</span>,breast_cancer.data.shape)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;breast_cancer的特征名称为：\n&#x27;</span>,breast_cancer.feature_names)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;breast_cancer.target的形状为：&#x27;</span>,breast_cancer.target.shape)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;breast_cancer.target的目标名称为：&#x27;</span>,breast_cancer.target_names)</span><br><span class="line">sns.violinplot(data=pd.DataFrame(breast_cancer.data))</span><br><span class="line">plt.title(<span class="string">&#x27;breast_cancer.data的各特征小提琴图&#x27;</span>)<span class="comment">#添加标题</span></span><br><span class="line"><span class="comment">#下行语句非常占内存，需要较长时间才能绘制成功，可以注释掉</span></span><br><span class="line"><span class="comment">#sns.pairplot(data=pd.DataFrame(breast_cancer.data))</span></span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> decomposition</span><br><span class="line"><span class="comment">#PCA降维</span></span><br><span class="line">pca = decomposition.PCA(n_components=<span class="number">10</span>)</span><br><span class="line">pca.fit(X_min_max)</span><br><span class="line">pca_X=pca.transform(X_min_max)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;经PCA降维后的形状为&#x27;</span>,pca_X.shape)</span><br><span class="line">sns.violinplot(data=pd.DataFrame(pca_X))</span><br><span class="line">plt.title(<span class="string">&#x27;PCA降维后各特征小提琴图&#x27;</span>)<span class="comment">#添加标题</span></span><br><span class="line">sns.pairplot(data=pd.DataFrame(pca_X))</span><br><span class="line">clf_lda=LDA(n_components=<span class="number">1</span>)<span class="comment">#n_components要小于类的数量</span></span><br><span class="line">clf_lda.fit(X_min_max, breast_cancer.target)</span><br><span class="line">lda_X=clf_lda.fit_transform(X_min_max,breast_cancer.target)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;lda_X的形状为：&#x27;</span>,lda_X.shape)</span><br><span class="line">ax = sns.stripplot(x=<span class="number">1</span>,y=<span class="number">0</span>,  </span><br><span class="line">                   data=pd.DataFrame(np.hstack((lda_X, breast_cancer.target.reshape(-<span class="number">1</span>,<span class="number">1</span>)))),</span><br><span class="line">                   jitter=<span class="literal">True</span>)</span><br><span class="line"><span class="comment">#TSNE降维</span></span><br><span class="line"><span class="keyword">from</span> sklearn.manifold <span class="keyword">import</span> TSNE</span><br><span class="line">tsne=TSNE(n_components=<span class="number">2</span>)<span class="comment">#n_components&lt;4</span></span><br><span class="line">tsne_X=tsne.fit_transform(X_min_max)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;tsne_X的形状为：&#x27;</span>,tsne_X.shape)</span><br><span class="line"><span class="comment">#在二维平面上将二维特征分类可视化</span></span><br><span class="line">plt.figure(figsize=(<span class="number">6</span>, <span class="number">4</span>))</span><br><span class="line">plt.scatter(tsne_X[np.where(breast_cancer.target==<span class="number">0</span>),<span class="number">0</span>],</span><br><span class="line">            tsne_X[np.where(breast_cancer.target==<span class="number">0</span>),<span class="number">1</span>],marker=<span class="string">&#x27;.&#x27;</span>,c=<span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">plt.scatter(tsne_X[np.where(breast_cancer.target==<span class="number">1</span>),<span class="number">0</span>],</span><br><span class="line">            tsne_X[np.where(breast_cancer.target==<span class="number">1</span>),<span class="number">1</span>],marker=<span class="string">&#x27;*&#x27;</span>,c=<span class="string">&#x27;g&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;breast_cancer数据集降为2维的分类别样本&#x27;</span>)<span class="comment">#添加标题</span></span><br><span class="line">plt.legend(breast_cancer.target_names)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h1 id="iris数据集特征-特征间关系及分类别分析">iris数据集特征、特征间关系及分类别分析</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="comment">#ch3-6,综合实例</span></span><br><span class="line"><span class="comment">#3-49. 分析scikit-learn自带数据集iris的特征及特征间关系</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> datasets</span><br><span class="line">iris = datasets.load_iris()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris.data的形状为：&#x27;</span>,iris.data.shape)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris.target的形状为：&#x27;</span>,iris.target.shape)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris.data的特征名称为：&#x27;</span>,iris.feature_names)</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="comment">#使用matplotlib.pyplot绘制图形</span></span><br><span class="line"><span class="comment">#以子图形式绘制特征的散点图、点线图、柱状图、饼图、箱形图、直方图</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = <span class="string">&#x27;SimHei&#x27;</span><span class="comment">#设置字体为SimHei显示中文</span></span><br><span class="line">p = plt.figure(figsize=(<span class="number">12</span>,<span class="number">10</span>))</span><br><span class="line"><span class="comment"># 子图1，两特征的三点图</span></span><br><span class="line">ax1 = p.add_subplot(<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>)</span><br><span class="line">plt.scatter(iris.data[:,<span class="number">0</span>],iris.data[:,<span class="number">1</span>], marker=<span class="string">&#x27;o&#x27;</span>)<span class="comment">#绘制散点图</span></span><br><span class="line">plt.xlabel(iris.feature_names[<span class="number">0</span>])<span class="comment">#添加横轴标签</span></span><br><span class="line">plt.ylabel(iris.feature_names[<span class="number">1</span>])<span class="comment">#添加y轴名称</span></span><br><span class="line">plt.title(<span class="string">&#x27;iris数据集特征散点图&#x27;</span>)<span class="comment">#添加标题</span></span><br><span class="line"><span class="comment">#子图2，4个特征的点线图</span></span><br><span class="line">ax1 = p.add_subplot(<span class="number">3</span>,<span class="number">2</span>,<span class="number">2</span>)</span><br><span class="line">plt.plot(iris.data[:,<span class="number">0</span>],color = <span class="string">&#x27;r&#x27;</span>,linestyle = <span class="string">&#x27;--&#x27;</span>,marker = <span class="string">&#x27;o&#x27;</span>)</span><br><span class="line">plt.plot(iris.data[:,<span class="number">1</span>],color = <span class="string">&#x27;g&#x27;</span>,linestyle = <span class="string">&#x27;-&#x27;</span>,marker = <span class="string">&#x27;*&#x27;</span>)</span><br><span class="line">plt.plot(iris.data[:,<span class="number">2</span>],color = <span class="string">&#x27;b&#x27;</span>,linestyle = <span class="string">&#x27;-&#x27;</span>,marker = <span class="string">&#x27;^&#x27;</span>)</span><br><span class="line">plt.plot(iris.data[:,<span class="number">3</span>],color = <span class="string">&#x27;k&#x27;</span>,linestyle = <span class="string">&#x27;-&#x27;</span>,marker = <span class="string">&#x27;&lt;&#x27;</span>)</span><br><span class="line">plt.legend([iris.feature_names[<span class="number">0</span>],iris.feature_names[<span class="number">1</span>],</span><br><span class="line">            iris.feature_names[<span class="number">2</span>],iris.feature_names[<span class="number">3</span>]])</span><br><span class="line">plt.xlabel(<span class="string">&#x27;index&#x27;</span>)<span class="comment">#添加横轴标签</span></span><br><span class="line">plt.ylabel(<span class="string">&#x27;feature values&#x27;</span>)<span class="comment">#添加y轴名称</span></span><br><span class="line">plt.title(<span class="string">&#x27;iris数据集特征点线图&#x27;</span>)<span class="comment">#添加标题</span></span><br><span class="line"><span class="comment"># 子图3，特征的柱状图</span></span><br><span class="line">ax1 = p.add_subplot(<span class="number">3</span>,<span class="number">2</span>,<span class="number">3</span>)</span><br><span class="line">plt.bar(<span class="built_in">range</span>(<span class="built_in">len</span>(iris.data[<span class="number">0</span>:<span class="number">20</span>,<span class="number">0</span>])),iris.data[<span class="number">0</span>:<span class="number">20</span>,<span class="number">0</span>],</span><br><span class="line">        width = <span class="number">0.5</span>)<span class="comment">## 绘制柱状图</span></span><br><span class="line">plt.title(<span class="string">&#x27;iris特征0柱状图&#x27;</span>)<span class="comment">#添加标题</span></span><br><span class="line"><span class="comment">#labels=[iris.feature_names[0]]</span></span><br><span class="line">plt.xlabel(iris.feature_names[<span class="number">0</span>])<span class="comment">#添加横轴标签</span></span><br><span class="line">plt.ylabel(<span class="string">&#x27;feature values&#x27;</span>)<span class="comment">#添加y轴名称</span></span><br><span class="line"><span class="comment">#plt.xticks(range(0),labels)</span></span><br><span class="line"><span class="comment"># 子图4，各特征和的饼图</span></span><br><span class="line">ax1 = p.add_subplot(<span class="number">3</span>,<span class="number">2</span>,<span class="number">4</span>)</span><br><span class="line">plt.pie([np.<span class="built_in">sum</span>(iris.data[:,<span class="number">0</span>]),np.<span class="built_in">sum</span>(iris.data[:,<span class="number">1</span>]),</span><br><span class="line">         np.<span class="built_in">sum</span>(iris.data[:,<span class="number">2</span>]),np.<span class="built_in">sum</span>(iris.data[:,<span class="number">3</span>])],</span><br><span class="line">        labels=iris.feature_names,autopct=<span class="string">&#x27;%1.1f%%&#x27;</span>)<span class="comment">#绘制饼图</span></span><br><span class="line">plt.title(<span class="string">&#x27;iris数据集各特征和的饼图&#x27;</span>)<span class="comment">#添加标题</span></span><br><span class="line"><span class="comment"># 子图5，箱线图</span></span><br><span class="line">ax1 = p.add_subplot(<span class="number">3</span>,<span class="number">2</span>,<span class="number">5</span>)</span><br><span class="line">plt.boxplot([iris.data[:,<span class="number">0</span>],iris.data[:,<span class="number">1</span>],</span><br><span class="line">            iris.data[:,<span class="number">2</span>],iris.data[:,<span class="number">3</span>]],</span><br><span class="line">            notch=<span class="literal">True</span>,labels =iris.feature_names, </span><br><span class="line">            meanline=<span class="literal">True</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;iris数据集各特征箱线图&#x27;</span>)<span class="comment">#添加标题</span></span><br><span class="line">plt.xlabel(<span class="string">&#x27;特征&#x27;</span>)<span class="comment">#添加横轴标签</span></span><br><span class="line">plt.ylabel(<span class="string">&#x27;特征值&#x27;</span>)<span class="comment">#添加y轴名称</span></span><br><span class="line">plt.xticks([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],iris.feature_names,rotation=<span class="number">15</span>)</span><br><span class="line"><span class="comment"># 子图6，特征直方图</span></span><br><span class="line">ax1 = p.add_subplot(<span class="number">3</span>,<span class="number">2</span>,<span class="number">6</span>)</span><br><span class="line">plt.hist(iris.data[:,<span class="number">0</span>],density=<span class="literal">True</span>,color=<span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">plt.hist(iris.data[:,<span class="number">1</span>],density=<span class="literal">True</span>,color=<span class="string">&#x27;g&#x27;</span>)</span><br><span class="line">plt.hist(iris.data[:,<span class="number">2</span>],density=<span class="literal">True</span>,color=<span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">plt.hist(iris.data[:,<span class="number">3</span>],density=<span class="literal">True</span>,color=<span class="string">&#x27;k&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;iris特征直方图（概率）&#x27;</span>)</span><br><span class="line">plt.legend(iris.feature_names)</span><br><span class="line">plt.tight_layout() <span class="comment">#调整子图间距，避免重叠</span></span><br><span class="line">plt.show()</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="comment">#使用seaborn绘图，观察特征分布、特征间关系、分类别可视化</span></span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"><span class="comment">#将iris的data和target合并</span></span><br><span class="line">iris_data_target=np.hstack((iris.data,iris.target.reshape(-<span class="number">1</span>,<span class="number">1</span>)))</span><br><span class="line"><span class="comment">#转化为DataFrame对象</span></span><br><span class="line">df_iris_data_target=pd.DataFrame(iris_data_target,</span><br><span class="line">                                 columns=[<span class="string">&#x27;sepal length&#x27;</span>, <span class="string">&#x27;sepal width&#x27;</span>,</span><br><span class="line">                                          <span class="string">&#x27;petal length&#x27;</span>, <span class="string">&#x27;petal width&#x27;</span>,</span><br><span class="line">                                          <span class="string">&#x27;species&#x27;</span>])</span><br><span class="line">g = sns.catplot(data=df_iris_data_target)</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line">g = sns.catplot(x=<span class="string">&quot;species&quot;</span>, y=<span class="string">&quot;sepal length&quot;</span>,</span><br><span class="line">                hue=<span class="string">&quot;species&quot;</span>, data=df_iris_data_target)</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="comment">#对类别特征添加核密度估计</span></span><br><span class="line">sns.catplot(x=<span class="string">&quot;species&quot;</span>, y=<span class="string">&quot;sepal width&quot;</span>,</span><br><span class="line">            hue=<span class="string">&quot;species&quot;</span>, kind=<span class="string">&quot;violin&quot;</span>,</span><br><span class="line">            data=df_iris_data_target)</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="comment">#按类别绘制特征的strip图</span></span><br><span class="line">ax = sns.stripplot(x=<span class="string">&quot;species&quot;</span>, y=<span class="string">&quot;petal length&quot;</span>, </span><br><span class="line">                   data=df_iris_data_target,jitter=<span class="number">0.05</span>)</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="comment">#按类别绘制特征的swarm图</span></span><br><span class="line">ax = sns.swarmplot(x=<span class="string">&quot;species&quot;</span>, y=<span class="string">&quot;petal width&quot;</span>,</span><br><span class="line">                   hue=<span class="string">&#x27;species&#x27;</span>, data=df_iris_data_target)</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="comment">#按类别绘制各特征的小提琴图，并添加类别图例</span></span><br><span class="line">ax = sns.violinplot(x=<span class="string">&quot;species&quot;</span>, y=<span class="string">&quot;petal width&quot;</span>,</span><br><span class="line">                   hue=<span class="string">&#x27;species&#x27;</span>, data=df_iris_data_target)</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="comment">#分类别绘制特征的分布箱形图</span></span><br><span class="line">ax = sns.boxenplot(x=<span class="string">&quot;species&quot;</span>, y=<span class="string">&quot;sepal width&quot;</span>,</span><br><span class="line">                   hue=<span class="string">&#x27;species&#x27;</span>, data=df_iris_data_target)</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="comment">#绘制样本数量统计图，并添加类别图例</span></span><br><span class="line">ax = sns.countplot(y=<span class="string">&quot;species&quot;</span>,hue=<span class="string">&#x27;species&#x27;</span>,</span><br><span class="line">                   data=df_iris_data_target,orient=<span class="string">&#x27;h&#x27;</span>)</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="comment">#绘制数组的分布</span></span><br><span class="line">sns.distplot(iris.data[:,<span class="number">0</span>])</span><br><span class="line">plt.title(iris.feature_names[<span class="number">0</span>]+<span class="string">&#x27;的分布&#x27;</span>)</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="comment">#绘制DataFrame对象切片的分布</span></span><br><span class="line">sns.distplot(df_iris_data_target.iloc[:,<span class="number">1</span>])</span><br><span class="line">plt.title(iris.feature_names[<span class="number">1</span>]+<span class="string">&#x27;的分布&#x27;</span>)</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="comment">#使用多种方式访问DataFrame对象的特征、切片，绘制特征分布</span></span><br><span class="line">sns.distplot(df_iris_data_target.iloc[:,<span class="number">0</span>],color=<span class="string">&quot;r&quot;</span>)</span><br><span class="line">sns.distplot(df_iris_data_target.loc[:,<span class="string">&#x27;sepal width&#x27;</span>],color=<span class="string">&quot;g&quot;</span>)</span><br><span class="line">sns.distplot(df_iris_data_target.loc[:,<span class="string">&#x27;petal length&#x27;</span>],color=<span class="string">&quot;b&quot;</span>)</span><br><span class="line">sns.distplot(df_iris_data_target[<span class="string">&#x27;petal width&#x27;</span>],color=<span class="string">&quot;k&quot;</span>)</span><br><span class="line">plt.legend(iris.feature_names)<span class="comment">#添加图例</span></span><br><span class="line">plt.title(<span class="string">&#x27;iris多个特征分布&#x27;</span>)</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="comment">#绘制二维特征联合分布核密度估计</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>]=<span class="literal">False</span><span class="comment">#显示负号</span></span><br><span class="line">sns.jointplot(df_iris_data_target[<span class="string">&#x27;petal length&#x27;</span>],</span><br><span class="line">              df_iris_data_target[<span class="string">&#x27;petal width&#x27;</span>],kind=<span class="string">&quot;kde&quot;</span>)</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="comment">#将iris.data转化为DataFrame对象，绘制两两特征间的散点图</span></span><br><span class="line">df_iris_data=pd.DataFrame(iris.data,columns=iris.feature_names)</span><br><span class="line">sns.pairplot(df_iris_data)</span><br><span class="line"><span class="comment">#%%</span></span><br></pre></td></tr></table></figure><h1 id="iris数据集统计分析">iris数据集统计分析</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="comment">#ch4-4 综合实例——iris数据集统计分析</span></span><br><span class="line"><span class="comment">#4-31 加载scikit-learn自带数据集iris，分别使用numpy, pandas</span></span><br><span class="line"><span class="comment">#进行统计分析，按照等宽法、等频法离散特征，进行分组聚合，创建透视表、交叉表</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> datasets</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line">iris = datasets.load_iris()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris.data的形状为：&#x27;</span>,iris.data.shape)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris.target的形状为：&#x27;</span>,iris.target.shape)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris.data的特征名称为：&#x27;</span>,iris.feature_names)</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="comment">#numpy统计分析，用热力图表示排序结果</span></span><br><span class="line">ax = sns.heatmap(iris.data)<span class="comment">#原始数据集</span></span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line">ax = sns.heatmap(np.sort(iris.data))<span class="comment">#不指定axis时，默认沿着横轴排序</span></span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line">ax = sns.heatmap(np.sort(iris.data,axis=<span class="number">0</span>))<span class="comment">#沿着纵轴排序</span></span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris.data各特征的和为：&#x27;</span>,iris.data.<span class="built_in">sum</span>(axis = <span class="number">0</span>))  <span class="comment">#沿着纵轴计算</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris.data各特征的均值为：&#x27;</span>,iris.data.mean(axis = <span class="number">0</span>))  <span class="comment">#沿着纵轴计算</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris.data各特征的标准差为：&#x27;</span>,iris.data.std(axis = <span class="number">0</span>))  <span class="comment">#沿着纵轴计算</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris.data各特征的方差为：&#x27;</span>,iris.data.var(axis = <span class="number">0</span>))  <span class="comment">#沿着纵轴计算</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris.data的最大值为：&#x27;</span>,np.<span class="built_in">max</span>(iris.data))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris.data的最小值为：&#x27;</span>,np.<span class="built_in">min</span>(iris.data))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris.data特征0的最大值索引为：&#x27;</span>,np.argmax(iris.data[:,<span class="number">0</span>]))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris.data特征0的最小值索引为：&#x27;</span>,np.argmin(iris.data[:,<span class="number">0</span>]))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris.data的最大值索引为：&#x27;</span>,np.argmax(iris.data))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris.data的最小值索引为：&#x27;</span>,np.argmin(iris.data))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris.data特征0的中位数为：&#x27;</span>,np.median(iris.data[:,<span class="number">0</span>]))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris.data的中位数为：&#x27;</span>,np.median(iris.data))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris.data特征0的极差为：&#x27;</span>,np.ptp(iris.data[:,<span class="number">0</span>]))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris.data的极差为：&#x27;</span>,np.ptp(iris.data))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris.data特征0与特征1的协方差为：\n&#x27;</span>,np.cov(iris.data[:,<span class="number">0</span>],iris.data[:,<span class="number">1</span>]))</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="comment">#pandas统计分析</span></span><br><span class="line"><span class="comment">#合并iris的数据集和目标集，转化为DataFrame对象</span></span><br><span class="line">df_iris=pd.DataFrame(np.hstack((iris.data,iris.target.reshape(-<span class="number">1</span>,<span class="number">1</span>))),</span><br><span class="line">                     columns=[<span class="string">&#x27;f0&#x27;</span>,<span class="string">&#x27;f1&#x27;</span>,<span class="string">&#x27;f2&#x27;</span>,<span class="string">&#x27;f3&#x27;</span>,<span class="string">&#x27;species&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris的形状为：&#x27;</span>,df_iris.shape)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris的列名为：&#x27;</span>,df_iris.columns)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris的前5行为：\n&#x27;</span>,df_iris.head())</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="comment">#查看iris特征0的各项统计数据</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris特征0的最小值为：&#x27;</span>,df_iris[<span class="string">&#x27;f0&#x27;</span>].<span class="built_in">min</span>())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris特征0的最大值为：&#x27;</span>,df_iris[<span class="string">&#x27;f0&#x27;</span>].<span class="built_in">max</span>())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris特征0的均值为：&#x27;</span>,df_iris[<span class="string">&#x27;f0&#x27;</span>].mean())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris特征0的极差为：&#x27;</span>,df_iris[<span class="string">&#x27;f0&#x27;</span>].kurt())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris特征0的方差为：&#x27;</span>,df_iris[<span class="string">&#x27;f0&#x27;</span>].var())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris特征0的标准差为：&#x27;</span>,df_iris[<span class="string">&#x27;f0&#x27;</span>].std())</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris的协方差矩阵为：\n&#x27;</span>,df_iris[[<span class="string">&#x27;f0&#x27;</span>, <span class="string">&#x27;f1&#x27;</span>, <span class="string">&#x27;f2&#x27;</span>, <span class="string">&#x27;f3&#x27;</span>]].cov())</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris数据表的相关系数为：\n&#x27;</span>,df_iris[[<span class="string">&#x27;f0&#x27;</span>, <span class="string">&#x27;f1&#x27;</span>, <span class="string">&#x27;f2&#x27;</span>, <span class="string">&#x27;f3&#x27;</span>]].corr())</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris特征0的标准误差为：&#x27;</span>,df_iris[<span class="string">&#x27;f0&#x27;</span>].sem())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris特征0的众数为：\n&#x27;</span>,df_iris[<span class="string">&#x27;f0&#x27;</span>].mode())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris特征0的样本偏度为：&#x27;</span>,df_iris[<span class="string">&#x27;f0&#x27;</span>].skew())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris特征0的样本峰度为：&#x27;</span>,df_iris[<span class="string">&#x27;f0&#x27;</span>].kurt())</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris特征0的中位数为：&#x27;</span>,df_iris[<span class="string">&#x27;f0&#x27;</span>].median())</span><br><span class="line"><span class="comment">#设置任意分位数</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris特征0的四分位数为：&#x27;</span>,df_iris[<span class="string">&#x27;f0&#x27;</span>].quantile(q=<span class="number">0.25</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris特征0的非空值数目为：&#x27;</span>,df_iris[<span class="string">&#x27;f0&#x27;</span>].count())</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris特征0的平均绝对离差为：&#x27;</span>,df_iris[<span class="string">&#x27;f0&#x27;</span>].mad())</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris数据表的描述性统计为：\n&#x27;</span>,df_iris[[<span class="string">&#x27;f0&#x27;</span>, <span class="string">&#x27;f1&#x27;</span>, <span class="string">&#x27;f2&#x27;</span>, <span class="string">&#x27;f3&#x27;</span>]].describe())</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="comment">#类别型数据描述性统计，先将类别转换为category类型</span></span><br><span class="line">df_iris[<span class="string">&#x27;species&#x27;</span>]=df_iris[<span class="string">&#x27;species&#x27;</span>].astype(<span class="string">&#x27;category&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris数据表的描述性统计为：\n&#x27;</span>, </span><br><span class="line">      df_iris[[<span class="string">&#x27;f0&#x27;</span>, <span class="string">&#x27;f1&#x27;</span>, <span class="string">&#x27;f2&#x27;</span>, <span class="string">&#x27;f3&#x27;</span>,<span class="string">&#x27;species&#x27;</span>]].describe())</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris数据表category类别species的描述性统计为：\n&#x27;</span>, </span><br><span class="line">      df_iris[<span class="string">&#x27;species&#x27;</span>].describe())</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris品种的频数统计为：\n&#x27;</span>,df_iris[<span class="string">&#x27;species&#x27;</span>].value_counts())</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris特征0的频数统计为：\n&#x27;</span>,df_iris[<span class="string">&#x27;f0&#x27;</span>].value_counts())</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line">k=<span class="number">5</span><span class="comment">#离散化为等宽的k个区间</span></span><br><span class="line"><span class="comment">#返回k个区间，相当于k个类，以bins作为分割点</span></span><br><span class="line">f0,bins=pd.cut(df_iris[<span class="string">&#x27;f0&#x27;</span>],k,retbins=<span class="literal">True</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris特征0分割成&#x27;</span>,k,<span class="string">&#x27;个等宽区间的分割点是：\n&#x27;</span>,bins)</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris特征0等宽离散化为5个区间后每个区间及其频数为：\n&#x27;</span>,</span><br><span class="line">      f0.value_counts())</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="comment">#可视化，按照频数降序排列</span></span><br><span class="line">a_frequency=f0.value_counts()</span><br><span class="line">labels=a_frequency.index[<span class="number">0</span>:k]<span class="comment">#将区间作为标签</span></span><br><span class="line"><span class="comment">#以下两行语句书本上没有，代码中新添加，用于在图中显示汉字，设置字号</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = <span class="string">&#x27;SimHei&#x27;</span><span class="comment">#设置字体为SimHei显示中文</span></span><br><span class="line">plt.rc(<span class="string">&#x27;font&#x27;</span>, size=<span class="number">14</span>)<span class="comment">#设置图中字号大小</span></span><br><span class="line">plt.figure(figsize=(<span class="number">6</span>,<span class="number">4</span>))<span class="comment">#设置画布</span></span><br><span class="line">plt.bar(<span class="built_in">range</span>(k),a_frequency,width=<span class="number">0.5</span>)<span class="comment">#绘制柱状图</span></span><br><span class="line">plt.title(<span class="string">&#x27;iris特征0等宽法频数统计图&#x27;</span>)<span class="comment">#添加标题</span></span><br><span class="line">plt.xlabel(<span class="string">&#x27;iris特征0&#x27;</span>)<span class="comment">#添加横轴标签</span></span><br><span class="line">plt.ylabel(<span class="string">&#x27;频数&#x27;</span>)<span class="comment">#添加y轴名称</span></span><br><span class="line">plt.xticks(<span class="built_in">range</span>(k),labels,rotation=<span class="number">20</span>)<span class="comment">#横轴刻度与标签对准</span></span><br><span class="line">plt.show()</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="comment">#可视化，按照区间从小到大排列</span></span><br><span class="line">a_frequency=f0.value_counts(sort=<span class="literal">False</span>)</span><br><span class="line">labels=a_frequency.index[<span class="number">0</span>:k]<span class="comment">#将区间作为标签</span></span><br><span class="line">plt.figure(figsize=(<span class="number">6</span>,<span class="number">4</span>))<span class="comment">#设置画布</span></span><br><span class="line">plt.bar(<span class="built_in">range</span>(k),a_frequency,width=<span class="number">0.5</span>)<span class="comment">#绘制柱状图</span></span><br><span class="line">plt.title(<span class="string">&#x27;iris特征0等宽法频数统计图&#x27;</span>)<span class="comment">#添加标题</span></span><br><span class="line">plt.xlabel(<span class="string">&#x27;iris特征0&#x27;</span>)<span class="comment">#添加横轴标签</span></span><br><span class="line">plt.ylabel(<span class="string">&#x27;频数&#x27;</span>)<span class="comment">#添加y轴名称</span></span><br><span class="line">plt.xticks(<span class="built_in">range</span>(k),labels,rotation=<span class="number">20</span>)<span class="comment">#横轴刻度与标签对准</span></span><br><span class="line">plt.show()</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="comment">#自定义等频法离散化函数</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">same_frequency_cut</span>(<span class="params">data,k</span>):</span><br><span class="line">    <span class="comment">#产生k个分位数位置</span></span><br><span class="line">    w=data.quantile(np.arange(<span class="number">0</span>,<span class="number">1</span>+<span class="number">1.0</span>/k,<span class="number">1.0</span>/k))</span><br><span class="line">    data=pd.cut(data,w)<span class="comment">#按照分位数位置离散化data</span></span><br><span class="line">    <span class="keyword">return</span> data</span><br><span class="line">a_frequency= same_frequency_cut(df_iris[<span class="string">&#x27;f0&#x27;</span>],<span class="number">5</span>).value_counts()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris特征0等频法离散化后各个类别数目分布状况为：&#x27;</span>,<span class="string">&#x27;\n&#x27;</span>,a_frequency)</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="comment">#可视化，按照区间从小到大排列</span></span><br><span class="line">a_frequency=same_frequency_cut(df_iris[<span class="string">&#x27;f0&#x27;</span>],<span class="number">5</span>).value_counts(sort=<span class="literal">False</span>)</span><br><span class="line">labels=a_frequency.index[<span class="number">0</span>:k]<span class="comment">#将区间作为标签</span></span><br><span class="line">plt.figure(figsize=(<span class="number">6</span>,<span class="number">4</span>))<span class="comment">#设置画布</span></span><br><span class="line">plt.bar(<span class="built_in">range</span>(k),a_frequency,width=<span class="number">0.5</span>)<span class="comment">#绘制柱状图</span></span><br><span class="line">plt.title(<span class="string">&#x27;iris特征0等频法频数统计图&#x27;</span>)<span class="comment">#添加标题</span></span><br><span class="line">plt.xlabel(<span class="string">&#x27;iris特征0&#x27;</span>)<span class="comment">#添加横轴标签</span></span><br><span class="line">plt.ylabel(<span class="string">&#x27;频数&#x27;</span>)<span class="comment">#添加y轴名称</span></span><br><span class="line">plt.xticks(<span class="built_in">range</span>(k),labels,rotation=<span class="number">20</span>)<span class="comment">#横轴刻度与标签对准</span></span><br><span class="line">plt.show()</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="comment">#使用groupby按照鸢尾花品种(species)进行分组聚合</span></span><br><span class="line">irisGroup = df_iris.groupby(by=<span class="string">&#x27;species&#x27;</span>)</span><br><span class="line"><span class="comment">#各个特征使用相同的函数统计计算</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris数据表按species分组后前5组每组的数量为：\n&#x27;</span>, </span><br><span class="line">      irisGroup.count().head())</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris数据表按species分组后前5组每组的最大值为：\n&#x27;</span>, </span><br><span class="line">      irisGroup.<span class="built_in">max</span>().head())</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris数据表按species分组后前5组每组的最小值为：\n&#x27;</span>, </span><br><span class="line">      irisGroup.<span class="built_in">min</span>().head())</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris数据表按species分组后前5组每组的和为：\n&#x27;</span>, </span><br><span class="line">      irisGroup.<span class="built_in">sum</span>().head())</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris数据表按species分组后前5组每组的均值为：\n&#x27;</span>, </span><br><span class="line">      irisGroup.mean().head())</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris数据表按species分组后前5组每组的标准差为：\n&#x27;</span>, </span><br><span class="line">      irisGroup.std().head())</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris数据表按species分组后前5组每组的中位数为：\n&#x27;</span>, </span><br><span class="line">      irisGroup.median().head())</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris数据表按species分组后前5组每组的大小为：\n&#x27;</span>, </span><br><span class="line">      irisGroup.size().head())</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="comment">#使用agg()聚合，func使用函数列表</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris数据表的特征0总和与特征1的总和与均值为：\n&#x27;</span>,</span><br><span class="line">      df_iris.agg(&#123;<span class="string">&#x27;f0&#x27;</span>:np.<span class="built_in">sum</span>,<span class="string">&#x27;f1&#x27;</span>:[np.mean,np.<span class="built_in">sum</span>]&#125;))</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris数据表分组后前5组每组的均值为：\n&#x27;</span>, </span><br><span class="line">      irisGroup.agg(np.mean).head())</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris数据表分组后前5组每组的聚合结果为：\n&#x27;</span>,</span><br><span class="line">      irisGroup.agg(&#123;<span class="string">&#x27;f0&#x27;</span>:np.<span class="built_in">sum</span>,<span class="string">&#x27;f1&#x27;</span>:[np.mean,np.<span class="built_in">sum</span>],</span><br><span class="line">                    <span class="string">&#x27;f2&#x27;</span>:[np.mean,np.<span class="built_in">sum</span>,np.std]&#125;))</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="comment">#创建透视表</span></span><br><span class="line">irisPivot = pd.pivot_table(df_iris[[<span class="string">&#x27;f0&#x27;</span>,<span class="string">&#x27;f1&#x27;</span>,<span class="string">&#x27;f2&#x27;</span>,<span class="string">&#x27;f3&#x27;</span>,<span class="string">&#x27;species&#x27;</span>]],</span><br><span class="line">      index = <span class="string">&#x27;species&#x27;</span>)<span class="comment">#默认使用numpy.mean</span></span><br><span class="line"><span class="comment">#获取组名</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris数据表按species分组聚合后的组名为：\n&#x27;</span>,irisPivot.index)</span><br><span class="line"><span class="comment">#获取组的数量</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris数据表按species分组聚合后的组的数量为：&#x27;</span>,irisPivot.index.size)</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris数据表按species分组聚合后的各组平均值为：\n&#x27;</span>,irisPivot.values)</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;以species作为分组键创建的iris数据透视表为：\n&#x27;</span>,</span><br><span class="line">       irisPivot.head())</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="comment">#使用两个分组键，第一个为主分组键，第二个为次分组键</span></span><br><span class="line">irisPivot = pd.pivot_table(df_iris[[<span class="string">&#x27;f0&#x27;</span>,<span class="string">&#x27;f1&#x27;</span>,<span class="string">&#x27;f2&#x27;</span>,<span class="string">&#x27;f3&#x27;</span>,<span class="string">&#x27;species&#x27;</span>]],</span><br><span class="line">      index = [<span class="string">&#x27;f0&#x27;</span>,<span class="string">&#x27;species&#x27;</span>],aggfunc = np.<span class="built_in">sum</span>)<span class="comment">#使用numpy.sum</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;以f0和species作为分组键创建的iris数据透视表为：\n&#x27;</span>,</span><br><span class="line">       irisPivot.head(<span class="number">10</span>))</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line">irisPivot = pd.pivot_table(df_iris[[<span class="string">&#x27;f0&#x27;</span>,<span class="string">&#x27;f1&#x27;</span>,<span class="string">&#x27;f2&#x27;</span>,<span class="string">&#x27;f3&#x27;</span>,<span class="string">&#x27;species&#x27;</span>]],</span><br><span class="line">                           index = [<span class="string">&#x27;species&#x27;</span>,<span class="string">&#x27;f0&#x27;</span>],</span><br><span class="line">                           aggfunc = np.<span class="built_in">sum</span>)<span class="comment">#使用numpy.sum</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;以species和f0作为分组键创建的iris数据透视表为：\n&#x27;</span>,</span><br><span class="line">       irisPivot.head(<span class="number">10</span>))</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line">irisPivot = pd.pivot_table(df_iris[[<span class="string">&#x27;f0&#x27;</span>,<span class="string">&#x27;f1&#x27;</span>,<span class="string">&#x27;f2&#x27;</span>,<span class="string">&#x27;f3&#x27;</span>,<span class="string">&#x27;species&#x27;</span>]],</span><br><span class="line">                           index = <span class="string">&#x27;species&#x27;</span>,</span><br><span class="line">                           columns=<span class="string">&#x27;f0&#x27;</span>,</span><br><span class="line">                           aggfunc = np.<span class="built_in">sum</span>)<span class="comment">#使用numpy.sum</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;以species和f0作为分组键创建的iris数据透视表为：\n&#x27;</span>,</span><br><span class="line">       irisPivot.head(<span class="number">10</span>))</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"><span class="comment">#创建交叉表</span></span><br><span class="line">irisCross = pd.crosstab(</span><br><span class="line">      index=df_iris[<span class="string">&#x27;species&#x27;</span>],</span><br><span class="line">      columns=df_iris[<span class="string">&#x27;f1&#x27;</span>],</span><br><span class="line">      values = df_iris[<span class="string">&#x27;f0&#x27;</span>],aggfunc = np.<span class="built_in">sum</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;以species和f1为分组键、f0为值的iris数据交叉透视表前10行10列为：\n&#x27;</span>,</span><br><span class="line">      irisCross.iloc[:<span class="number">10</span>,:<span class="number">10</span>])</span><br><span class="line"><span class="comment">#%%</span></span><br></pre></td></tr></table></figure><h1 id="使用决策树对鸢尾花数据集iris进行分类">使用决策树对鸢尾花数据集iris进行分类</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#加载scikit-learn自带数据集iris</span></span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> datasets</span><br><span class="line">iris = datasets.load_iris()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris.data的形状为：&#x27;</span>,iris.data.shape)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris.data的特征名称为：&#x27;</span>,iris.feature_names)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris.target的内容为：\n&#x27;</span>,iris.target)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris.target的形状为：&#x27;</span>,iris.target.shape)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris.target的鸢尾花名称为：&#x27;</span>,iris.target_names)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"></span><br><span class="line">X=iris.data</span><br><span class="line">y=iris.target</span><br><span class="line"><span class="comment">#导入scikit-learn的tree模块</span></span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> tree</span><br><span class="line"><span class="comment">#调用决策树分类器，添加参数</span></span><br><span class="line">clf_tree = tree.DecisionTreeClassifier(criterion=<span class="string">&#x27;entropy&#x27;</span>,max_depth=<span class="number">2</span>)</span><br><span class="line"><span class="comment">#将训练集和目标集进行匹配训练</span></span><br><span class="line">clf_tree.fit(X,y)</span><br><span class="line">dot_data=tree.export_graphviz(clf_tree, out_file=<span class="literal">None</span>,</span><br><span class="line">                              feature_names=iris.feature_names,</span><br><span class="line">                              class_names=<span class="literal">True</span>,</span><br><span class="line">                              filled=<span class="literal">True</span>, rounded=<span class="literal">True</span>)</span><br><span class="line"><span class="comment">#观察dot_data决策结果数据文件</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;dot_data决策结果数据文件为：\n&#x27;</span>,dot_data)</span><br><span class="line"></span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#导入graphviz模块，将训练生成的决策树数据文件可视化。要求事先已安装好graphviz模块。</span></span><br><span class="line"><span class="keyword">import</span> graphviz</span><br><span class="line"><span class="comment">#设置环境变量，将graphviz的bin目录加到PATH</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">os.environ[<span class="string">&quot;PATH&quot;</span>] += os.pathsep + <span class="string">&#x27;D:/Program Files/Graphviz2.38/bin/&#x27;</span></span><br><span class="line"><span class="comment">#决策树可视化</span></span><br><span class="line">graph=graphviz.Source(dot_data)</span><br><span class="line">graph</span><br><span class="line"></span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"></span><br><span class="line">y_predict=clf_tree.predict(X)</span><br><span class="line"><span class="comment">#可视化</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = <span class="string">&#x27;SimHei&#x27;</span><span class="comment">#设置字体为SimHei显示中文</span></span><br><span class="line"><span class="comment">#plt.rcParams[&#x27;axes.unicode_minus&#x27;]=False#坐标轴刻度显示负号</span></span><br><span class="line">plt.rc(<span class="string">&#x27;font&#x27;</span>, size=<span class="number">14</span>)<span class="comment">#设置图中字号大小</span></span><br><span class="line">plt.figure(figsize=(<span class="number">10</span>,<span class="number">4</span>)) </span><br><span class="line">plt.scatter(<span class="built_in">range</span>(<span class="built_in">len</span>(y)),y,marker=<span class="string">&#x27;o&#x27;</span>)</span><br><span class="line">plt.scatter(<span class="built_in">range</span>(<span class="built_in">len</span>(y)),y_predict+<span class="number">0.1</span>,marker=<span class="string">&#x27;*&#x27;</span>)<span class="comment">#将数据错开</span></span><br><span class="line">plt.legend([<span class="string">&#x27;真实类别&#x27;</span>,<span class="string">&#x27;预测类别&#x27;</span>])</span><br><span class="line">plt.title(<span class="string">&#x27;使用决策树对iris数据集的预测结果与真实类别的对比&#x27;</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#调用决策树分类器，添加参数</span></span><br><span class="line">clf_tree2 = tree.DecisionTreeClassifier(criterion=<span class="string">&#x27;gini&#x27;</span>,max_depth=<span class="number">2</span>)</span><br><span class="line"><span class="comment">#将训练集和目标集进行匹配训练</span></span><br><span class="line">clf_tree2.fit(X,y)</span><br><span class="line">dot_data=tree.export_graphviz(clf_tree2, out_file=<span class="literal">None</span>,</span><br><span class="line">                              feature_names=iris.feature_names,</span><br><span class="line">                              class_names=<span class="literal">True</span>,</span><br><span class="line">                              filled=<span class="literal">True</span>, rounded=<span class="literal">True</span>)</span><br><span class="line">graph=graphviz.Source(dot_data)</span><br><span class="line">graph</span><br><span class="line"></span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"></span><br><span class="line">y_predict2=clf_tree2.predict(X)</span><br><span class="line"><span class="comment">#可视化</span></span><br><span class="line">plt.figure(figsize=(<span class="number">10</span>,<span class="number">4</span>)) </span><br><span class="line">plt.scatter(<span class="built_in">range</span>(<span class="built_in">len</span>(y)),y,marker=<span class="string">&#x27;o&#x27;</span>)</span><br><span class="line">plt.scatter(<span class="built_in">range</span>(<span class="built_in">len</span>(y)),y_predict2+<span class="number">0.1</span>,marker=<span class="string">&#x27;*&#x27;</span>)<span class="comment">#将数据错开</span></span><br><span class="line">plt.legend([<span class="string">&#x27;真实类别&#x27;</span>,<span class="string">&#x27;预测类别&#x27;</span>])</span><br><span class="line">plt.title(<span class="string">&#x27;使用决策树对iris数据集的预测结果与真实类别的对比&#x27;</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#调用决策树分类器，添加参数</span></span><br><span class="line">clf_tree3 = tree.DecisionTreeClassifier(criterion=<span class="string">&#x27;gini&#x27;</span>,max_depth=<span class="number">3</span>)</span><br><span class="line"><span class="comment">#将训练集和目标集进行匹配训练</span></span><br><span class="line">clf_tree3.fit(X,y)</span><br><span class="line">dot_data=tree.export_graphviz(clf_tree3, out_file=<span class="literal">None</span>,</span><br><span class="line">                              feature_names=iris.feature_names,</span><br><span class="line">                              class_names=<span class="literal">True</span>,</span><br><span class="line">                              filled=<span class="literal">True</span>, rounded=<span class="literal">True</span>)</span><br><span class="line">graph=graphviz.Source(dot_data)</span><br><span class="line">graph</span><br><span class="line"></span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"></span><br><span class="line">y_predict3=clf_tree3.predict(X)</span><br><span class="line"><span class="comment">#可视化</span></span><br><span class="line">plt.figure(figsize=(<span class="number">10</span>,<span class="number">4</span>)) </span><br><span class="line">plt.scatter(<span class="built_in">range</span>(<span class="built_in">len</span>(y)),y,marker=<span class="string">&#x27;o&#x27;</span>)</span><br><span class="line">plt.scatter(<span class="built_in">range</span>(<span class="built_in">len</span>(y)),y_predict3+<span class="number">0.1</span>,marker=<span class="string">&#x27;*&#x27;</span>)<span class="comment">#将数据错开</span></span><br><span class="line">plt.legend([<span class="string">&#x27;真实类别&#x27;</span>,<span class="string">&#x27;预测类别&#x27;</span>])</span><br><span class="line">plt.title(<span class="string">&#x27;使用决策树对iris数据集的预测结果与真实类别的对比&#x27;</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="使用kmeans对iris数据集聚类">使用KMeans对iris数据集聚类</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#%%</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#综合实例</span></span><br><span class="line"><span class="comment">#例10-6 对iris数据进行聚类</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> datasets</span><br><span class="line"><span class="comment">#导入鸢尾花数据集iris</span></span><br><span class="line">iris = datasets.load_iris()</span><br><span class="line"><span class="comment"># 取全部4列作为特征属性</span></span><br><span class="line"><span class="comment">#print(&#x27;iris的内容为：\n&#x27;,iris)</span></span><br><span class="line">X = iris.data</span><br><span class="line">y = iris.target</span><br><span class="line"><span class="comment">#计算K值从1到10对应的平均畸变程度，寻找较好的聚类数目K</span></span><br><span class="line">DrawElbowKMeans(X=X)</span><br><span class="line">plt.show() </span><br><span class="line"></span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> MinMaxScaler</span><br><span class="line"><span class="keyword">from</span> sklearn.cluster <span class="keyword">import</span> KMeans</span><br><span class="line">data = X<span class="comment">#提取数据集中的特征</span></span><br><span class="line">scale = MinMaxScaler().fit(data)<span class="comment"># 训练规则，极差标准化</span></span><br><span class="line">dataScale = scale.transform(data)<span class="comment"># 应用规则</span></span><br><span class="line">kmeans = KMeans(n_clusters = <span class="number">3</span>).fit(dataScale)<span class="comment">#构建并训练模型</span></span><br><span class="line"><span class="comment">#观察聚类结果的数据文件</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;构建的K-Means模型为：\n&#x27;</span>,kmeans)</span><br><span class="line"></span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"></span><br><span class="line">labels= kmeans.labels_ <span class="comment">#提取聚类结果的类标签</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris数据集原始类别为：\n&#x27;</span>,y)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;iris数据集聚类结果为：\n&#x27;</span>,labels)</span><br><span class="line"></span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;簇的质心为：\n&#x27;</span>,kmeans.cluster_centers_)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;样本到最近簇质心的距离和为：&#x27;</span>,kmeans.inertia_)</span><br><span class="line"></span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#可视化，观察聚类结果，与原始类别进行对比</span></span><br><span class="line">plt.figure(figsize=(<span class="number">12</span>,<span class="number">4</span>))<span class="comment">#设置画布</span></span><br><span class="line">plt.scatter(<span class="built_in">range</span>(y.size), y, c=<span class="string">&#x27;k&#x27;</span>,marker=<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">plt.scatter(<span class="built_in">range</span>(y.size), labels+<span class="number">.1</span>, c=<span class="string">&#x27;k&#x27;</span>,marker=<span class="string">&#x27;x&#x27;</span>)<span class="comment">#适当错开，便于观察</span></span><br><span class="line">plt.xlim((<span class="number">0</span>,y.size))</span><br><span class="line">plt.xlabel(<span class="string">&#x27;样本序号&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;分类/聚类标签&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;鸢尾花K均值聚类结果与原始分类结果对比&#x27;</span>)</span><br><span class="line">plt.legend([<span class="string">&#x27;原始分类&#x27;</span>,<span class="string">&#x27;聚类结果&#x27;</span>])</span><br><span class="line">plt.show() </span><br></pre></td></tr></table></figure><h1 id="使用支持向量机对wine数据集进行分类">使用支持向量机对wine数据集进行分类</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#例9-10 综合实例. 使用支持向量机对scikit-learn自带数据集wine进行分类。</span></span><br><span class="line"><span class="comment">#要求将数据集拆分为训练集和测试集，使用训练集训练支持向量机模型，使用测试集测试模型</span></span><br><span class="line"><span class="comment">#加载scikit-learn自带数据集wine</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> svm, datasets</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line">wine=datasets.load_wine()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;wine.data的形状为：&#x27;</span>,wine.data.shape)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;wine.target的形状为：&#x27;</span>,wine.target.shape)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;wine.target的特征名称为：\n&#x27;</span>,wine.target_names)</span><br><span class="line"><span class="comment">#将数据集拆分为训练集和测试集</span></span><br><span class="line">X = wine.data</span><br><span class="line">y = wine.target</span><br><span class="line">X_train,X_test, y_train,y_test = train_test_split(</span><br><span class="line">    X,y,train_size = <span class="number">0.8</span>,random_state = <span class="number">42</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;拆分后训练集特征集的形状为：&#x27;</span>,X_train.shape)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;拆分后训练集目标集的形状为：&#x27;</span>,y_train.shape)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;拆分后测试集特征集的形状为：&#x27;</span>,X_test.shape)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;拆分后测试集目标集的形状为：&#x27;</span>,y_test.shape)</span><br><span class="line">kernels=[<span class="string">&#x27;linear&#x27;</span>, <span class="string">&#x27;poly&#x27;</span>, <span class="string">&#x27;rbf&#x27;</span>,<span class="string">&#x27;sigmoid&#x27;</span>]</span><br><span class="line"><span class="keyword">for</span> kernel <span class="keyword">in</span> kernels:</span><br><span class="line">    <span class="comment">#使用支持向量机进行训练</span></span><br><span class="line">    clf_svm = svm.SVC(kernel=kernel,gamma=<span class="number">2</span>)</span><br><span class="line">    clf_svm.fit(X_train, y_train)</span><br><span class="line">    y_pred = clf_svm.predict(X_test)<span class="comment">#预测</span></span><br><span class="line">    <span class="comment">#可视化预测结果，将预测结果与实际类标签对比</span></span><br><span class="line">    plt.rc(<span class="string">&#x27;font&#x27;</span>, size=<span class="number">14</span>)<span class="comment">#设置图中字号大小</span></span><br><span class="line">    plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = <span class="string">&#x27;SimHei&#x27;</span><span class="comment">#设置字体为SimHei显示中文</span></span><br><span class="line">    plt.figure(figsize=(<span class="number">8</span>, <span class="number">3</span>))</span><br><span class="line">    <span class="comment">#绘制训练集原始数据散点图，以表示</span></span><br><span class="line">    plt.scatter(<span class="built_in">range</span>(<span class="built_in">len</span>(y_test)),y_test, marker=<span class="string">&#x27;o&#x27;</span>)</span><br><span class="line">    plt.scatter(<span class="built_in">range</span>(<span class="built_in">len</span>(y_pred)),y_pred+<span class="number">0.1</span>, marker=<span class="string">&#x27;*&#x27;</span>)<span class="comment">#将类标签错开</span></span><br><span class="line">    plt.xlabel(<span class="string">&#x27;样本索引&#x27;</span>)</span><br><span class="line">    plt.ylabel(<span class="string">&#x27;类标签&#x27;</span>)</span><br><span class="line">    plt.legend([<span class="string">&#x27;实际类标签&#x27;</span>,<span class="string">&#x27;预测类标签&#x27;</span>])</span><br><span class="line">    title=kernel+<span class="string">&#x27;核函数对测试集的预测结果与实际类标签对比&#x27;</span></span><br><span class="line">    plt.title(title)<span class="comment">#添加标题</span></span><br><span class="line">    plt.show()</span><br></pre></td></tr></table></figure><h1 id="波士顿房价数据集的回归分析">波士顿房价数据集的回归分析</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#例7-11 Boston房价回归模型</span></span><br><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LinearRegression</span><br><span class="line"><span class="keyword">from</span> sklearn.datasets <span class="keyword">import</span> load_boston</span><br><span class="line">boston = load_boston()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;boston房价数据集的特征名字为：&#x27;</span>,boston.feature_names)</span><br><span class="line">X = boston.data</span><br><span class="line">y = boston.target</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;X的形状为：&#x27;</span>,X.shape)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;y的形状为：&#x27;</span>,y.shape)</span><br><span class="line"><span class="comment">#线性回归</span></span><br><span class="line">lin_reg = LinearRegression().fit(X,y)</span><br><span class="line"><span class="comment">#原书中语句：y_lin_reg_pred = clf_lin_reg.predict(X)</span></span><br><span class="line"><span class="comment">#应为：</span></span><br><span class="line">y_lin_reg_pred = lin_reg.predict(X)</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="comment">#可视化</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = <span class="string">&#x27;SimHei&#x27;</span><span class="comment">#设置字体为SimHei显示中文</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>]=<span class="literal">False</span><span class="comment">#坐标轴刻度显示负号</span></span><br><span class="line">plt.rc(<span class="string">&#x27;font&#x27;</span>, size=<span class="number">14</span>)<span class="comment">#设置图中字号大小</span></span><br><span class="line">plt.figure(figsize=(<span class="number">15</span>,<span class="number">4</span>)) </span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>]=<span class="literal">False</span><span class="comment">#坐标轴刻度显示负号</span></span><br><span class="line">plt.plot(y,marker=<span class="string">&#x27;o&#x27;</span>)</span><br><span class="line">plt.plot(y_lin_reg_pred,marker=<span class="string">&#x27;*&#x27;</span>)</span><br><span class="line">plt.legend([<span class="string">&#x27;真实值&#x27;</span>,<span class="string">&#x27;预测值&#x27;</span>])</span><br><span class="line">plt.title(<span class="string">&#x27;Boston房价线性回归预测值与真实值的对比&#x27;</span>)</span><br><span class="line">plt.show()</span><br><span class="line"><span class="comment">#2次多项式回归</span></span><br><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> PolynomialFeatures</span><br><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LinearRegression</span><br><span class="line">boston_poly = PolynomialFeatures(<span class="number">2</span>)</span><br><span class="line">boston_poly.fit(X)<span class="comment">#拟合多项式模型</span></span><br><span class="line">X2=boston_poly.transform(X)<span class="comment">#使用拟合模型变换X</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;原始数据集X的形状为：&#x27;</span>,X.shape)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;X转换为X2后的形状为：&#x27;</span>,X2.shape)  </span><br><span class="line">lin_reg = LinearRegression()<span class="comment">#生成线性回归模型实例</span></span><br><span class="line">lin_reg.fit(X2,y)<span class="comment">#使用变换后的数据集拟合线性回归模型</span></span><br><span class="line">y_poly2_predict=lin_reg.predict(X2)</span><br><span class="line"><span class="comment">#可视化</span></span><br><span class="line">plt.figure(figsize=(<span class="number">15</span>,<span class="number">4</span>)) </span><br><span class="line">plt.plot(y,marker=<span class="string">&#x27;o&#x27;</span>)</span><br><span class="line">plt.plot(y_poly2_predict,marker=<span class="string">&#x27;*&#x27;</span>)</span><br><span class="line">plt.legend([<span class="string">&#x27;真实值&#x27;</span>,<span class="string">&#x27;预测值&#x27;</span>])</span><br><span class="line">plt.title(<span class="string">&#x27;Boston房价2次多项式回归预测值与真实值的对比&#x27;</span>)</span><br><span class="line">plt.show()</span><br><span class="line"><span class="comment">#3次多项式回归</span></span><br><span class="line">boston_poly3 = PolynomialFeatures(<span class="number">3</span>)</span><br><span class="line">boston_poly3.fit(X)<span class="comment">#拟合多项式模型</span></span><br><span class="line">X3=boston_poly3.transform(X)<span class="comment">#使用拟合模型变换X</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;原始数据集X的形状为：&#x27;</span>,X.shape)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;X转换为X3后的形状为：&#x27;</span>,X3.shape)  </span><br><span class="line">lin_reg = LinearRegression()<span class="comment">#生成线性回归模型实例</span></span><br><span class="line">lin_reg.fit(X3,y)<span class="comment">#使用变换后的数据集拟合线性回归模型</span></span><br><span class="line">y_poly3_predict=lin_reg.predict(X3)</span><br><span class="line"><span class="comment">#可视化</span></span><br><span class="line">plt.figure(figsize=(<span class="number">15</span>,<span class="number">4</span>)) </span><br><span class="line">plt.plot(y,marker=<span class="string">&#x27;o&#x27;</span>)</span><br><span class="line">plt.plot(y_poly3_predict,marker=<span class="string">&#x27;*&#x27;</span>)</span><br><span class="line">plt.legend([<span class="string">&#x27;真实值&#x27;</span>,<span class="string">&#x27;预测值&#x27;</span>])</span><br><span class="line">plt.title(<span class="string">&#x27;Boston房价3次多项式回归预测值与真实值的对比&#x27;</span>)</span><br><span class="line">plt.show()</span><br><span class="line"><span class="comment">#计算三种回归模型预测值与真实值的相对误差</span></span><br><span class="line">error_linear=(y_lin_reg_pred-y)/y</span><br><span class="line">error_poly2=(y_poly2_predict-y)/y</span><br><span class="line">error_poly3=(y_poly3_predict-y)/y</span><br><span class="line"><span class="comment">#可视化，绘制相对误差</span></span><br><span class="line">plt.figure(figsize=(<span class="number">15</span>,<span class="number">4</span>)) </span><br><span class="line">plt.plot(error_linear,c=<span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">plt.plot(error_poly2,c=<span class="string">&#x27;y&#x27;</span>)</span><br><span class="line">plt.plot(error_poly3,c=<span class="string">&#x27;b&#x27;</span>)</span><br><span class="line">plt.legend([<span class="string">&#x27;linear&#x27;</span>,<span class="string">&#x27;ploy2&#x27;</span>,<span class="string">&#x27;ploy3&#x27;</span>])</span><br><span class="line">plt.title(<span class="string">&#x27;3个估计器对Boston房价预测值与真实值的相对误差&#x27;</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><h1 id="集成学习算法分析数据">集成学习算法分析数据</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#综合实例11-6. 加载scikit-learn自带数据集diabetes，使用集成学习方法进行分类</span></span><br><span class="line"><span class="keyword">from</span> sklearn.ensemble <span class="keyword">import</span> BaggingClassifier,RandomForestClassifier</span><br><span class="line"><span class="keyword">from</span> sklearn.ensemble <span class="keyword">import</span> AdaBoostClassifier,GradientBoostingClassifier</span><br><span class="line"><span class="keyword">from</span> xgboost <span class="keyword">import</span> XGBClassifier</span><br><span class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> tree, datasets</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line">digits=datasets.load_digits()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;digits.data的形状为：&#x27;</span>,digits.data.shape)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;digits.target的形状为：&#x27;</span>,digits.target.shape)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;digits.target的特征名称为：\n&#x27;</span>,digits.target_names)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&#x27;digits.images的形状为：\n&#x27;</span>,digits.images.shape)</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line">X=digits.data</span><br><span class="line">y=digits.target</span><br><span class="line">X_train,X_test, y_train,y_test = train_test_split(</span><br><span class="line">    X,y,train_size = <span class="number">0.8</span>,random_state = <span class="number">42</span>)</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line">d_tree = tree.DecisionTreeClassifier()</span><br><span class="line">bagging=BaggingClassifier(base_estimator=tree.DecisionTreeClassifier())</span><br><span class="line">r_forest=RandomForestClassifier()</span><br><span class="line">adaboost = AdaBoostClassifier(base_estimator=</span><br><span class="line">                              tree.DecisionTreeClassifier())</span><br><span class="line">gboost = GradientBoostingClassifier()</span><br><span class="line">xgboost = XGBClassifier()</span><br><span class="line"><span class="comment">#%%</span></span><br><span class="line">model_name=[<span class="string">&#x27;决策树&#x27;</span>,<span class="string">&#x27;Bagging&#x27;</span>,<span class="string">&#x27;随机森林&#x27;</span>,<span class="string">&#x27;AdaBoost&#x27;</span>,<span class="string">&#x27;XGBoost&#x27;</span>]</span><br><span class="line">models=&#123;d_tree,bagging, r_forest, adaboost, gboost, xgboost&#125;</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">for</span> name_idx, model <span class="keyword">in</span> <span class="built_in">zip</span>([<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>],models):</span><br><span class="line">    start = time.perf_counter()</span><br><span class="line">    model.fit(X_train,y_train)</span><br><span class="line">    end = time.perf_counter()</span><br><span class="line">    <span class="built_in">print</span> (model_name[name_idx],<span class="string">&#x27;模型拟合时间为：&#x27;</span>,end-start)</span><br><span class="line">    y_pred=model.predict(X_test)</span><br><span class="line">    wrong_pred_num=<span class="built_in">len</span>(y[np.where(y_pred!=y_test)])</span><br><span class="line">    <span class="built_in">print</span>(model_name[name_idx],<span class="string">&#x27;预测错误的样本数量为：&#x27;</span>,wrong_pred_num)</span><br><span class="line">    time.sleep(<span class="number">2</span>)<span class="comment">#延迟2秒</span></span><br></pre></td></tr></table></figure></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者:</span> <span class="post-copyright-info"><a href="https://kebuaaa.github.io">爱编程的小明</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接:</span> <span class="post-copyright-info"><a href="https://kebuaaa.github.io/%E7%BB%BC%E5%90%88%E5%AE%9E%E4%BE%8B/">https://kebuaaa.github.io/%E7%BB%BC%E5%90%88%E5%AE%9E%E4%BE%8B/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明:</span> <span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://kebuaaa.github.io" target="_blank">小明的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/">数据分析</a><a class="post-meta__tags" href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E7%BC%96%E7%A8%8B/">机器学习编程</a></div><div class="post-share"><div class="social-share" data-image="/top_img/10006.webp" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/Numpy/" title="Numpy"><img class="cover" src="https://gcore.jsdelivr.net/gh/kebuAAA/Picloud@main/img/loading.gif" data-lazy-src="/top_img/10029.webp" onerror='onerror=null,src="https://images.pexels.com/photos/374918/pexels-photo-374918.jpeg?auto=compress&amp;cs=tinysrgb&amp;w=600"' alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Numpy</div></div><div class="info-2"><div class="info-item-1">numpy(numerical Python) 是 Python 数值计算最重要的基础包，大多数提供科学计算的包都是用 NumPy 的数组为构建基础。 NumPy 可以用于数值计算的一个重要原因是因为他能处理大数组的数据： 在连续的内存块储存数据，独立于其他 Python 内置对象（C 语言编写的算法库，在 C 的基础上封装） 可以在整个数组上执行复杂的计算，不需要 for loop 速查 图片对应pdf.pdf 介绍 基本用法 NumPy 最重要的一个特点就是 ndarray(n 维数组对象，一个快速而灵活的大数据集容器) Creating ndarray python 默认创建数组的数据类型是浮点数（方便科学计算） np.array(): 支持任何序列对象 np.zeros（） np.empty()创建一个数组，值可能为 0 有些情况下为垃圾值 np.arrange():类似于内置的 range 返回一个 数组的数据类型 类型转换–np.astype 可以在创建数组时指定数值类型，也可以通过...</div></div></div></a><a class="pagination-related" href="/SQL/" title="SQL"><img class="cover" src="https://gcore.jsdelivr.net/gh/kebuAAA/Picloud@main/img/loading.gif" data-lazy-src="/top_img/10054.webp" onerror='onerror=null,src="https://images.pexels.com/photos/374918/pexels-photo-374918.jpeg?auto=compress&amp;cs=tinysrgb&amp;w=600"' alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">SQL</div></div><div class="info-2"><div class="info-item-1">关系型数据库的命名是因为数据库展现了表单形式的不同类型数据之间的关系。 SQL 是结构化数据查询语言，是我们用来像数据管理系统（Data Management system）下达指令时用到的. Sqlite 是一个轻量的 DBMS。 SQL SQL 既不是一个 API 也不是一种协议，而是一种声明式语言，只需要告诉它做什么即可。 它是关系型数据库的通用语言。SQL 查询是客户端发送给数据库服务器的文本字符串，指明需要执行的具体操作。 SQL is everywhere SQL enables us to pull data from many sources SQL 语句的三种类型： DDL（Data Definition Language，数据定义语言）：处理用户、数据库以及表单的创建、删除、约束和权限等 DML（Data Manipulation Language，数据操纵语言） 用来查询或者变更表中的记录。 DCL（Data Control Language，数据控制语言） 用来确认或者取消对数据库中的数据进行的变更。除此之外，还可以对...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/%E4%BA%A7%E7%94%9F%E5%92%8C%E5%8A%A0%E8%BD%BD%E6%95%B0%E6%8D%AE%E9%9B%86/" title="产生和加载数据集"><img class="cover" src="https://gcore.jsdelivr.net/gh/kebuAAA/Picloud@main/img/loading.gif" data-lazy-src="/top_img/10047.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-06</div><div class="info-item-2">产生和加载数据集</div></div><div class="info-2"><div class="info-item-1">速查表pdf 文本数据读写 python 读取文件常用的一种方式是 open()函数，open 里写文件的路径，读取后返回一个文件对象，借助 file_obj.read()函数可以调取出文件对象的数据（返回字符串），这种情况下要记得使用 close 函数把读取的文件关闭，以免造成损害。 另外一种读取文件的方法是利用 with 关键词来打开文件建立对象，打开的文件对象会在 with 区块内跳出时关闭文件对象。 逐行读取文件 逐行读取的第一种方法是直接通过循环对文件对象进行操作，每次读取出的一行行末的换行符可通过 restrip()函数删除 第二种方法是直接调用文件对象的 readline()方法，该方法将会返回一个字符串组成的列表，列表中每一个字符串包含一行，且有结尾换行符。通过对返回列表的操作可以实现对数据的组合 file_obj=open(&quot;D:/test.txt&quot;)data=file_obj.read()print(data)for line in file_obj: print(line) ...</div></div></div></a><a class="pagination-related" href="/Matplotlib/" title="Matplotlib库"><img class="cover" src="https://gcore.jsdelivr.net/gh/kebuAAA/Picloud@main/img/loading.gif" data-lazy-src="https://matplotlib.org/_static/images/logo2.svg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-04-01</div><div class="info-item-2">Matplotlib库</div></div><div class="info-2"><div class="info-item-1">将本文结合代码使用效果更佳哦❤️❤️ matplotlib is a desktop plotting package designed for creating (mostly twodimensional) publication-quality plots. The project was started by John Hunter in 2002 to enable a MATLAB-like plotting interface in Python. Over time, matplotlib has spawned a number of add-on toolkits for data visualization that use matplotlib for their underlying plotting. One of these is...</div></div></div></a><a class="pagination-related" href="/Numpy/" title="Numpy"><img class="cover" src="https://gcore.jsdelivr.net/gh/kebuAAA/Picloud@main/img/loading.gif" data-lazy-src="/top_img/10029.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-27</div><div class="info-item-2">Numpy</div></div><div class="info-2"><div class="info-item-1">numpy(numerical Python) 是 Python 数值计算最重要的基础包，大多数提供科学计算的包都是用 NumPy 的数组为构建基础。 NumPy 可以用于数值计算的一个重要原因是因为他能处理大数组的数据： 在连续的内存块储存数据，独立于其他 Python 内置对象（C 语言编写的算法库，在 C 的基础上封装） 可以在整个数组上执行复杂的计算，不需要 for loop 速查 图片对应pdf.pdf 介绍 基本用法 NumPy 最重要的一个特点就是 ndarray(n 维数组对象，一个快速而灵活的大数据集容器) Creating ndarray python 默认创建数组的数据类型是浮点数（方便科学计算） np.array(): 支持任何序列对象 np.zeros（） np.empty()创建一个数组，值可能为 0 有些情况下为垃圾值 np.arrange():类似于内置的 range 返回一个 数组的数据类型 类型转换–np.astype 可以在创建数组时指定数值类型，也可以通过...</div></div></div></a><a class="pagination-related" href="/Pandas/" title="Pandas"><img class="cover" src="https://gcore.jsdelivr.net/gh/kebuAAA/Picloud@main/img/loading.gif" data-lazy-src="https://camo.githubusercontent.com/981d48e57e23a4907cebc4eb481799b5882595ea978261f22a3e131dcd6ebee6/68747470733a2f2f70616e6461732e7079646174612e6f72672f7374617469632f696d672f70616e6461732e737667" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-09-02</div><div class="info-item-2">Pandas</div></div><div class="info-2"><div class="info-item-1">放一个目录做的的思维导图 一场数模国赛下来发现对于pandas里的一些基础操作还不是很熟练，整个建模过程中用到了许多pandas中对DataFrame的索引，切片访问，分组交叉透视等功能，除此以外稍微高级一点的就是用了几次apply函数来对某一行的值进行一个计算输出，虽然知识描述统计这部分的内容，但是能明显的感觉到对于这些基本功能有些生疏。坦白来讲，pandas的描述统计相关的这些工作其实借助excel也能够实现，但是当考虑到可迁移性这些方面的内容时，使用编程语言的优越性也就自然而然地体现出来，当然，如果对相关的函数不能做到很熟悉的话，其实反而加大了工作量。 简介 Pandas 是 Python 的核心数据分析支持库，提供了快速、灵活、明确的数据结构，旨在简单、直观地处理关系型、标记型数据。Pandas 的目标是成为 Python 数据分析实践与实战的必备高级工具，其长远目标是成为最强大、最灵活、可以支持任何语言的开源数据分析工具。经过多年不懈的努力，Pandas 离这个目标已经越来越近了。 虽然 pandas 采用了大量的 NumPy 编码风格，但二者最大的不同是...</div></div></div></a><a class="pagination-related" href="/R%E7%BC%96%E7%A8%8B%E5%85%A5%E9%97%A8/" title="R基础"><img class="cover" src="https://gcore.jsdelivr.net/gh/kebuAAA/Picloud@main/img/loading.gif" data-lazy-src="https://www.r-project.org/logo/Rlogo.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-09-01</div><div class="info-item-2">R基础</div></div><div class="info-2"><div class="info-item-1">常用函数(备忘) 函数 含义 install.packages() 装包 update.packages() 更新包 library() 加载包 object 在R中，一个object可以是任何可以赋值给变量的东西（数据结构、函数、甚至是graph），一个object有两个重要的东西叫mode和class，前者决定这个object的存储方式(numeric,character，logical)，后者决定函数如何处理这个object。虽然有object的概念，但是R本身仍然是一种自顶向下式的编程方式，大部分功能都是通过各式各样的函数来实现的。 常用函数 dim()函数返回数据的维度 length()函数返回数据的长度 str()函数返回数据的结构 class()函数返回数据的类型 mode()函数返回数据的存储方式 names()函数返回数据的列名(Gives the names of components in an...</div></div></div></a><a class="pagination-related" href="/SQL/" title="SQL"><img class="cover" src="https://gcore.jsdelivr.net/gh/kebuAAA/Picloud@main/img/loading.gif" data-lazy-src="/top_img/10054.webp" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-26</div><div class="info-item-2">SQL</div></div><div class="info-2"><div class="info-item-1">关系型数据库的命名是因为数据库展现了表单形式的不同类型数据之间的关系。 SQL 是结构化数据查询语言，是我们用来像数据管理系统（Data Management system）下达指令时用到的. Sqlite 是一个轻量的 DBMS。 SQL SQL 既不是一个 API 也不是一种协议，而是一种声明式语言，只需要告诉它做什么即可。 它是关系型数据库的通用语言。SQL 查询是客户端发送给数据库服务器的文本字符串，指明需要执行的具体操作。 SQL is everywhere SQL enables us to pull data from many sources SQL 语句的三种类型： DDL（Data Definition Language，数据定义语言）：处理用户、数据库以及表单的创建、删除、约束和权限等 DML（Data Manipulation Language，数据操纵语言） 用来查询或者变更表中的记录。 DCL（Data Control Language，数据控制语言） 用来确认或者取消对数据库中的数据进行的变更。除此之外，还可以对...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="https://gcore.jsdelivr.net/gh/kebuAAA/Picloud@main/img/loading.gif" data-lazy-src="/img/avatar.webp" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info-name">爱编程的小明</div><div class="author-info-description">只要不折腾，万般可将就</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">100</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">57</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">18</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/kebuAAA"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/kebuAAA" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="/2945190789@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="/img/wechat.webp" target="_blank" title="欢迎交流"><i class="fa-brands fa-weixin"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">如网页加载较慢请尝试魔法上网，博客图文可能无关可以忽略</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%8A%A0%E8%BD%BDboston%E6%95%B0%E6%8D%AE%E9%9B%86-%E5%8F%A6%E5%AD%98%E5%B9%B6%E9%87%8D%E6%96%B0%E8%AE%BF%E9%97%AE"><span class="toc-number">1.</span> <span class="toc-text">加载boston数据集、另存并重新访问</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#breast-cancer%E6%95%B0%E6%8D%AE%E9%9B%86%E9%A2%84%E5%A4%84%E7%90%86"><span class="toc-number">2.</span> <span class="toc-text">breast_cancer数据集预处理</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#iris%E6%95%B0%E6%8D%AE%E9%9B%86%E7%89%B9%E5%BE%81-%E7%89%B9%E5%BE%81%E9%97%B4%E5%85%B3%E7%B3%BB%E5%8F%8A%E5%88%86%E7%B1%BB%E5%88%AB%E5%88%86%E6%9E%90"><span class="toc-number">3.</span> <span class="toc-text">iris数据集特征、特征间关系及分类别分析</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#iris%E6%95%B0%E6%8D%AE%E9%9B%86%E7%BB%9F%E8%AE%A1%E5%88%86%E6%9E%90"><span class="toc-number">4.</span> <span class="toc-text">iris数据集统计分析</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%86%B3%E7%AD%96%E6%A0%91%E5%AF%B9%E9%B8%A2%E5%B0%BE%E8%8A%B1%E6%95%B0%E6%8D%AE%E9%9B%86iris%E8%BF%9B%E8%A1%8C%E5%88%86%E7%B1%BB"><span class="toc-number">5.</span> <span class="toc-text">使用决策树对鸢尾花数据集iris进行分类</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8kmeans%E5%AF%B9iris%E6%95%B0%E6%8D%AE%E9%9B%86%E8%81%9A%E7%B1%BB"><span class="toc-number">6.</span> <span class="toc-text">使用KMeans对iris数据集聚类</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%94%AF%E6%8C%81%E5%90%91%E9%87%8F%E6%9C%BA%E5%AF%B9wine%E6%95%B0%E6%8D%AE%E9%9B%86%E8%BF%9B%E8%A1%8C%E5%88%86%E7%B1%BB"><span class="toc-number">7.</span> <span class="toc-text">使用支持向量机对wine数据集进行分类</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%B3%A2%E5%A3%AB%E9%A1%BF%E6%88%BF%E4%BB%B7%E6%95%B0%E6%8D%AE%E9%9B%86%E7%9A%84%E5%9B%9E%E5%BD%92%E5%88%86%E6%9E%90"><span class="toc-number">8.</span> <span class="toc-text">波士顿房价数据集的回归分析</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%9B%86%E6%88%90%E5%AD%A6%E4%B9%A0%E7%AE%97%E6%B3%95%E5%88%86%E6%9E%90%E6%95%B0%E6%8D%AE"><span class="toc-number">9.</span> <span class="toc-text">集成学习算法分析数据</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/Lasso%E5%9B%9E%E5%BD%92/" title="Lasso回归"><img src="https://gcore.jsdelivr.net/gh/kebuAAA/Picloud@main/img/loading.gif" data-lazy-src="/top_img/10004.webp" onerror='this.onerror=null,this.src="https://images.pexels.com/photos/374918/pexels-photo-374918.jpeg?auto=compress&amp;cs=tinysrgb&amp;w=600"' alt="Lasso回归"></a><div class="content"><a class="title" href="/Lasso%E5%9B%9E%E5%BD%92/" title="Lasso回归">Lasso回归</a><time datetime="2023-11-14T16:00:00.000Z" title="更新于 2023-11-15 00:00:00">2023-11-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E5%B2%AD%E5%9B%9E%E5%BD%92/" title="岭回归"><img src="https://gcore.jsdelivr.net/gh/kebuAAA/Picloud@main/img/loading.gif" data-lazy-src="https://gcore.jsdelivr.net/gh/kebuAAA/Picloud@main/岭回归_20231109082818.png" onerror='this.onerror=null,this.src="https://images.pexels.com/photos/374918/pexels-photo-374918.jpeg?auto=compress&amp;cs=tinysrgb&amp;w=600"' alt="岭回归"></a><div class="content"><a class="title" href="/%E5%B2%AD%E5%9B%9E%E5%BD%92/" title="岭回归">岭回归</a><time datetime="2023-11-07T16:00:00.000Z" title="更新于 2023-11-08 00:00:00">2023-11-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E4%BC%98%E9%9B%85%E8%AE%BA%E6%96%87%E6%8E%92%E7%89%88/" title="优雅论文排版"><img src="https://gcore.jsdelivr.net/gh/kebuAAA/Picloud@main/img/loading.gif" data-lazy-src="https://gcore.jsdelivr.net/gh/kebuAAA/Picloud@main/优雅论文排版_20230921093206.png" onerror='this.onerror=null,this.src="https://images.pexels.com/photos/374918/pexels-photo-374918.jpeg?auto=compress&amp;cs=tinysrgb&amp;w=600"' alt="优雅论文排版"></a><div class="content"><a class="title" href="/%E4%BC%98%E9%9B%85%E8%AE%BA%E6%96%87%E6%8E%92%E7%89%88/" title="优雅论文排版">优雅论文排版</a><time datetime="2023-09-20T16:00:00.000Z" title="更新于 2023-09-21 00:00:00">2023-09-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/%E5%A4%9A%E5%85%83%E7%BB%9F%E8%AE%A1%E5%88%86%E6%9E%90/" title="多元统计分析"><img src="https://gcore.jsdelivr.net/gh/kebuAAA/Picloud@main/img/loading.gif" data-lazy-src="https://gcore.jsdelivr.net/gh/kebuAAA/Picloud@main/多元统计分析_多元正态曲线.png" onerror='this.onerror=null,this.src="https://images.pexels.com/photos/374918/pexels-photo-374918.jpeg?auto=compress&amp;cs=tinysrgb&amp;w=600"' alt="多元统计分析"></a><div class="content"><a class="title" href="/%E5%A4%9A%E5%85%83%E7%BB%9F%E8%AE%A1%E5%88%86%E6%9E%90/" title="多元统计分析">多元统计分析</a><time datetime="2023-06-16T02:22:54.000Z" title="更新于 2023-06-16 10:22:54">2023-06-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/Hypothesis%20testing/" title="假设检验"><img src="https://gcore.jsdelivr.net/gh/kebuAAA/Picloud@main/img/loading.gif" data-lazy-src="/top_img/10007.webp" onerror='this.onerror=null,this.src="https://images.pexels.com/photos/374918/pexels-photo-374918.jpeg?auto=compress&amp;cs=tinysrgb&amp;w=600"' alt="假设检验"></a><div class="content"><a class="title" href="/Hypothesis%20testing/" title="假设检验">假设检验</a><time datetime="2023-05-09T02:34:00.000Z" title="更新于 2023-05-09 10:34:00">2023-05-09</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="footer_custom_text"><div id="runtime"></div></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"></div><div id="rightside-config-show"><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"></div><script src="/Scripts/js/beijing.js"></script><script src="/Scripts/js/foot_style.js"></script><script src="/Scripts/js/fireworks.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script><script>(()=>{window.pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"],cacheBust:!1,analytics:!1,scrollRestoration:!1});const e=e=>{e&&Object.values(e).forEach((e=>e()))};document.addEventListener("pjax:send",(()=>{btf.removeGlobalFnEvent("pjaxSendOnce"),btf.removeGlobalFnEvent("themeChange");const t=document.body.classList;t.contains("read-mode")&&t.remove("read-mode"),e(window.globalFn.pjaxSend)})),document.addEventListener("pjax:complete",(()=>{btf.removeGlobalFnEvent("pjaxCompleteOnce"),document.querySelectorAll("script[data-pjax]").forEach((e=>{const t=document.createElement("script"),n=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach((e=>t.setAttribute(e.name,e.value))),t.appendChild(document.createTextNode(n)),e.parentNode.replaceChild(t,e)})),e(window.globalFn.pjaxComplete)})),document.addEventListener("pjax:error",(e=>{if(404===e.request.status){window.location.href=e.request.responseURL}}))})()</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><div class="js-pjax"><script async>for(var arr=document.getElementsByClassName("recent-post-item"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__zoomIn"),arr[i].setAttribute("data-wow-duration","2s"),arr[i].setAttribute("data-wow-delay","0.5s"),arr[i].setAttribute("data-wow-offset","100"),arr[i].setAttribute("data-wow-iteration","1")</script><script async>for(var arr=document.getElementsByClassName("card-widget"),i=0;i<arr.length;i++)arr[i].classList.add("wow"),arr[i].classList.add("animate__zoomIn"),arr[i].setAttribute("data-wow-duration",""),arr[i].setAttribute("data-wow-delay",""),arr[i].setAttribute("data-wow-offset",""),arr[i].setAttribute("data-wow-iteration","")</script></div><script defer src="https://unpkg.zhimg.com/hexo-butterfly-wowjs/lib/wow.min.js"></script><script defer src="https://unpkg.zhimg.com/hexo-butterfly-wowjs/lib/wow_init.js"></script></body></html>